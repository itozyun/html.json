var ca = {xml:!0, svg:!0, math:!0}, da = {async:!0, autofocus:!0, checked:!0, compact:!0, declare:!0, defer:!0, disabled:!0, draggable:!0, hidden:!0, ismap:!0, loop:!0, multiple:!0, nohref:!0, noresize:!0, noshade:!0, novalidate:!0, nowrap:!0, readonly:!0, required:!0, reversed:!0, scoped:!0, selected:!0}, ea = {AREA:!0, BASE:!0, BASEFONT:!0, BR:!0, BGSOUND:!0, COL:!0, COMMAND:!0, FRAME:!0, HR:!0, IMG:!0, INPUT:!0, ISINDEX:!0, KEYGEN:!0, LINK:!0, META:!0, PARAM:!0, SOURCE:!0, TRACK:!0, EMBED:!0, 
WBR:!0, area:!0, base:!0, basefont:!0, br:!0, bgsound:!0, col:!0, command:!0, frame:!0, hr:!0, img:!0, input:!0, isindex:!0, keygen:!0, link:!0, meta:!0, param:!0, source:!0, track:!0, embed:!0, wbr:!0}, fa = {MAP:!0, DL:!0, OL:!0, UL:!0, SELECT:!0, OPTGROUP:!0, TABLE:!0, THEAD:!0, TFOOT:!0, TBODY:!0, COLGROUP:!0, TR:!0, HEAD:!0, MENU:!0, FRAMESET:!0, map:!0, dl:!0, ol:!0, ul:!0, select:!0, optgroup:!0, table:!0, thead:!0, tfoot:!0, tbody:!0, colgroup:!0, tr:!0, head:!0, menu:!0, frameset:!0}, ha = 
{SCRIPT:!0, STYLE:!0, TEXTAREA:!0, TITLE:!0, PLAINTEXT:!0, XMP:!0, LISTING:!0, script:!0, style:!0, textarea:!0, title:!0, plaintext:!0, xmp:!0, listing:!0}, ia = {TEXTAREA:!0, TITLE:!0, LISTING:!0, textarea:!0, title:!0, listing:!0}, E = {CAPTION:{ARTICLE:!0, SECTION:!0, NAV:!0, ASIDE:!0, H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, 
ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, DD:{ARTICLE:!0, SECTION:!0, 
NAV:!0, ASIDE:!0, H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, 
TABLE:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, DT:{ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, 
SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, TABLE:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, P:{A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, 
I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, HTML:{HEAD:!0, BODY:!0, FRAMESET:!0}, HEAD:{TITLE:!0, BASE:!0, BGSOUND:!0, LINK:!0, META:!0, STYLE:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0}, 
COLGROUP:{COL:!0}, OPTGROUP:{OPTION:!0}, OPTION:{}, TBODY:{TR:!0}, TR:{TH:!0, TD:!0}, RBC:{RB:!0, RP:!0, RT:!0}};
E.LI = E.TD = E.DD;
E.TH = E.DT;
E.RB = E.RP = E.RT = E.P;
E.TFOOT = E.THEAD = E.TBODY;
E.RTC = E.RBC;
var G = {a:2, b:2, c:2, d:2, e:2, f:2, g:2, h:2, i:2, j:2, k:2, l:2, m:2, n:2, o:2, p:2, q:2, r:2, s:2, t:2, u:2, v:2, w:2, x:2, y:2, z:2, A:1, B:1, C:1, D:1, E:1, F:1, G:1, H:1, I:1, J:1, K:1, L:1, M:1, N:1, O:1, P:1, Q:1, R:1, S:1, T:1, U:1, V:1, W:1, X:1, Y:1, Z:1, "\t":4, "\n":4, "\f":4, "\r":4, " ":4};
function H(a) {
  return a.split("&lt;").join("<").split("&gt;").join(">").split("&amp;lt;").join("&lt;").split("&amp;gt;").join("&gt;");
}
function ja(a) {
  return H(a).split('\\"').join('"').split("\\'").join("'");
}
function ka(a, b, e) {
  function h() {
    l = a.indexOf("<", l + 1);
    -1 === l && (l = a.length, k());
  }
  function k() {
    if (l) {
      var n = a.substr(0, l);
      a = a.substr(l);
      l = 0;
      (C || r && !fa[r]) && (n = B && !ia[r] ? n : H(n)) && b.$.push([3, K(n)]);
    }
  }
  function f(n) {
    b.ja && b.ja(n);
  }
  function g(n) {
    for (var v = 0, w = a.length, c = 3, x, m; c < w && 2 !== v; ++c) {
      switch(x = a.charAt(c), v) {
        case 0:
          G[x] & 4 ? v = 1 : ">" === x && (v = 2);
          v && (m = a.substring(2, c));
          break;
        case 1:
          ">" === x && (v = 2);
      }
    }
    if (2 === v) {
      a = a.substr(c), ea[m] || q(n, p || d || z ? m : m.toUpperCase(), !1);
    } else {
      return f(a), !0;
    }
  }
  function q(n, v, w) {
    var c = 0, x = n.length;
    if (v) {
      for (c = x; 0 <= c && n[--c] !== v;) {
      }
    }
    if (0 <= c) {
      for (; c < x;) {
        v = n[--x];
        var m;
        if (m = w) {
          m = n[x];
          if (p || d) {
            m = m.toUpperCase();
          }
          m = !E[m];
        }
        ma(b, v, m, !1);
        d && ca[n[x]] && (d = !1);
      }
      n.length = c;
      if (z) {
        for (z = !1, x = c; x;) {
          if (0 < n[--x].indexOf(":")) {
            z = !0;
            break;
          }
        }
      }
    } else {
      ma(b, v, !1, !0);
    }
    r = n[n.length - 1];
  }
  function y(n) {
    function v(X, Y) {
      P[X] = !0 === Y ? d ? X : Y : da[X.toLowerCase()] ? d ? ja(Y || X) : !0 : ja(Y || "");
      ++Z;
    }
    function w() {
      (I = "/>" === a.substr(m, 2)) && ++m;
      return I;
    }
    for (var c = 1, x = a.length, m = 2, P = {}, Z = 0, I = !1, D, M, J, R, la, aa, ba; m < x && 9 > c; ++m) {
      switch(D = a.charAt(m), c) {
        case 1:
          if (G[D] & 4) {
            c = 2, M = a.substring(1, m);
          } else if (">" === D || w()) {
            c = 9, M = a.substring(1, m);
          }
          break;
        case 2:
          ">" === D || w() ? c = 9 : G[D] & 4 || (c = 3, J = m);
          break;
        case 3:
          if ("=" === D) {
            c = 5, R = a.substring(J, m);
          } else if (G[D] & 4) {
            c = 4, R = a.substring(J, m);
          } else if (">" === D || w()) {
            c = 9, v(a.substring(J, m), !0);
          }
          break;
        case 4:
          "=" === D ? c = 5 : ">" === D || w() ? (c = 9, v(R, !0)) : G[D] & 4 || (c = 3, v(R, !0), J = m);
          break;
        case 5:
          '"' === D || "'" === D ? (c = 6, la = D, J = m + 1) : G[D] & 4 || (c = 7, J = m);
          aa = !1;
          break;
        case 6:
          aa || D !== la || (c = 2, v(R, a.substring(J, m)));
          aa = "\\" === D && !aa;
          break;
        case 7:
          G[D] & 4 ? c = 2 : ">" === D && (c = 9), 7 !== c && v(R, a.substring(J, m));
      }
    }
    if (9 === c) {
      d ||= !!ca[M];
      z ||= 0 < M.indexOf(":");
      c = d || z;
      if (!c) {
        for (ba = M.toUpperCase(); r;) {
          if (x = r.toUpperCase(), E[x] && !E[x][ba]) {
            q(n, r, !1);
          } else {
            break;
          }
        }
      }
      (I = I || !!ea[M]) || (r = n[n.length] = p || c ? M : ba);
      a = a.substr(m);
      na(b, p || c ? M : ba, Z ? P : null, I);
    } else {
      return f(a), !0;
    }
  }
  var p = !1, A = [], C = !0, d = !1, z = !1, l = -1, r = A[A.length - 1], t;
  for (h(); a;) {
    var B = ha[r];
    if (a.indexOf("<?") === l) {
      C && a.length === e && a.indexOf("<?xml ") === l && (C = !1, p = !0);
      k();
      var u = a.indexOf("?>");
      if (-1 !== u) {
        var F = a.substring(2, u);
        a = a.substr(u + 2);
        oa(b, H(F));
      } else {
        f(a);
        return;
      }
    } else if (a.indexOf("</", l) === l && G[a.charAt(l + 2)] & 3) {
      if (B && ("PLAINTEXT" === r || "plaintext" === r ? t = !0 : a.indexOf(r.toLowerCase(), l) !== l + 2 && a.indexOf(r.toUpperCase(), l) !== l + 2 && (t = !0)), t) {
        h(), t = !1;
      } else {
        if (k(), g(A)) {
          return;
        }
      }
    } else if (B) {
      h();
    } else if ("<" === a.charAt(l) && G[a.charAt(l + 1)] & 3) {
      if (k(), y(A)) {
        return;
      }
    } else if (a.indexOf("\x3c!--") === l) {
      if (k(), u = a.indexOf("--\x3e"), -1 !== u) {
        F = a.substring(4, u), a = a.substr(u + 3), pa(b, H(F));
      } else {
        f(a);
        return;
      }
    } else if (a.indexOf("<![CDATA[") === l) {
      if (k(), u = a.indexOf("]]\x3e"), -1 !== u) {
        F = a.substring(9, u), a = a.substr(u + 3), qa(b, H(F));
      } else {
        f(a);
        return;
      }
    } else if (a.indexOf("<!DOCTYPE ") === l || a.indexOf("<!doctype ") === l) {
      if (a = a.substr(l), l = 0, u = a.indexOf(">"), -1 !== u) {
        F = a.substring(0, u + 1), a = a.substr(u + 1), C && (p = 0 < F.indexOf("-//W3C//DTD XHTML ")), C = !1, b.ba.splice(0, 1, 9, F);
      } else {
        f(a);
        return;
      }
    } else {
      h();
    }
  }
  q(A, "", !0);
}
;function L(a) {
  return a === "" + a;
}
function N(a) {
  return !!a && a.constructor === Array;
}
;function O(a, b, e) {
  var h = a, k = ra(h), f = 0, g = b(a, null, -1, f / 3), q = [-1, a, k], y = !1;
  if (Infinity === g || -Infinity === g) {
    return !1;
  }
  if (0 < h.length - k) {
    do {
      var p = ++q[f];
      var A = h[p + k];
      if (null != A) {
        g = b(A, h, p + k, f / 3 + 1);
        if (Infinity === g) {
          return y;
        }
        if (-Infinity !== g) {
          if (-1 >= g) {
            q[f] += g, y = !0;
          } else {
            if (1 <= g && (q[f] += g, y = !0), ra(A) < A.length) {
              f += 3, q[f] = -1, q[f + 1] = h = A, q[f + 2] = k = ra(A);
            } else if (e && h) {
              g = e(A, h, p + k, f / 3 + 1);
              if (Infinity === g) {
                return y;
              }
              -Infinity !== g && (-1 >= g || 1 <= g) && (q[f] += g, y = !0);
            }
          }
        }
      } else {
        if (q.length = f, f -= 3, h = q[f + 1], k = q[f + 2], e && h) {
          p = q[f] + k;
          g = e(h[p], h, p, f / 3 + 1);
          if (Infinity === g) {
            return y;
          }
          -Infinity !== g && (-1 >= g || 1 <= g) && (q[f] += g, y = !0);
        }
      }
    } while (0 <= f);
  }
  e && e(a, null, -1, 0);
  return y;
}
;var sa = {SCRIPT:!0, STYLE:!0, TEXTAREA:!0, script:!0, style:!0, textarea:!0}, ta = {PRE:!0, LISTING:!0, pre:!0, listing:!0};
function Q(a) {
  return L(a) || a === +a;
}
function S(a) {
  var b;
  if (b = a === "" + +a) {
    b = +a, b = b === +b && b !== b + 1;
  }
  return b ? +a : a;
}
function T(a) {
  if (Q(a)) {
    a = 3;
  } else {
    if (N(a)) {
      if (L(a[0])) {
        a = 1;
      } else {
        var b = a[0];
        a = b === +b ? a[0] : -1;
      }
    } else {
      a = -1;
    }
  }
  return a;
}
function ra(a) {
  var b = a[0], e = T(a);
  return 1 === e || 17 === e ? (b = b === +b ? 2 : 1, a = a[b], !N(a) && a && "object" === typeof a ? b + 1 : b) : 11 === b ? 1 : 9 === b || 13 === b || 16 === b ? 2 : Infinity;
}
function K(a) {
  return a.split("\r\n").join("\n").split("\r").join("\n");
}
function U(a, b) {
  for (; a.charAt(0) === b;) {
    a = a.substr(1);
  }
  return a;
}
function V(a, b) {
  for (; a.charAt(a.length - 1) === b;) {
    a = a.substr(0, a.length - 1);
  }
  return a;
}
function ua(a) {
  var b = a.indexOf("#"), e = a.indexOf("."), h = "", k = "";
  b < e ? (h = a.split(".")[1], a = a.split(".")[0], 0 < b && (k = a.split("#")[1], a = a.split("#")[0])) : e < b && (k = a.split("#")[1], a = a.split("#")[0], 0 < e && (h = a.split(".")[1], a = a.split(".")[0]));
  return [a, k, h];
}
function va(a, b, e) {
  b && (a += "#" + b);
  e && (a += "." + e);
  return a;
}
function wa(a) {
  function b(C, d) {
    f[V(C, " ")] = "0px" === d ? 0 : S(V(d, " "));
    ++g;
  }
  for (var e = 0, h = a.length, k = 0, f = {}, g = 0, q, y, p = "", A; k < h; ++k) {
    q = a.charAt(k);
    switch(e) {
      case 0:
        if (G[q] & 4) {
          break;
        }
        y = k;
        e = 1;
      case 1:
        ":" === q && (A = a.substring(y, k), e = 2);
        break;
      case 2:
        if (G[q] & 4) {
          break;
        }
        y = k;
        e = 3;
      case 3:
        '"' === q || "'" === q ? (p = q, e = 4) : ";" === q && (b(A, a.substring(y, k)), e = 0);
        break;
      case 4:
        p === q && (p = "", e = 3);
    }
    3 <= e && b(A, a.substring(y));
  }
  return g ? f : null;
}
;function xa(a, b) {
  function e(d, z, l) {
    function r(B, u) {
      for (; 0 <= d.indexOf(B);) {
        d = d.split(B).join(u);
      }
    }
    l && (d = d.replace(/([\uFF01-\uFF60\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF])\s([\uFF01-\uFF60\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF])/g, "$1$2"));
    d = d.split("\t").join(" ");
    r("\n\n", "\n");
    r("  ", " ");
    if (z && ("\n " === d.substr(d.length - 2) && (d = V(d, " ")), "\n" === d.charAt(d.length - 1))) {
      var t = "\n" === d.charAt(0);
    }
    d = V(d, "\n");
    d = d.split("\n").join(" ");
    r("  ", " ");
    t && (d = V(U(d, " "), " "));
    d = d.split("\\u0020").join(" ").split("&#x20;").join(" ").split("&#32;").join(" ");
    return S(d);
  }
  function h(d, z) {
    function l(n) {
      return n.split("\n").join("").split(" ").join("").split("\t").join("");
    }
    function r(n) {
      var v;
      O(n, function(w, c, x) {
        3 === T(w) && (v = [w, c, x]);
      });
      return v;
    }
    var t, B;
    for (O(d, function(n, v, w) {
      if (3 === T(n)) {
        n = "" + (Q(n) ? n : n[1]);
        if (l(n)) {
          return v.splice(w, 1, U(n, "\n")), Infinity;
        }
        v.splice(w, 1);
        return -1;
      }
    }); t = r(d);) {
      var u = t[0];
      var F = t[1];
      t = t[2];
      u = "" + (Q(u) ? u : u[1]);
      if (l(u)) {
        F.splice(t, 1, V(u, "\n"));
        break;
      } else {
        F.splice(t, 1);
      }
    }
    if (z) {
      for (; O(d, function(n, v, w) {
        if (3 === T(n)) {
          var c = r(d);
          var x = c ? v === c[1] && w === c[2] : !1;
          c = "" + (Q(n) ? n : n[1]);
          for (var m = c.split("\n"), P = 0, Z = m.length, I; P < Z - (x ? 0 : 1); ++P) {
            for (c = m[P];;) {
              if (I = c.charAt(c.length - 1), "\t" === I || " " === I) {
                c = c.substr(0, c.length - 1);
              } else {
                break;
              }
            }
            m[P] = c;
          }
          c = m.join("\n");
          if ("\n" === c && B) {
            return n = B[0], x = B[1], m = B[2], Q(n) ? x[m] += c : n[1] += c, v.splice(w, 1), -1;
          }
          Q(n) ? v[w] = c : n[1] = c;
          B = [n, v, w];
        }
      });) {
      }
    }
  }
  b = b || {};
  var k = -1 !== ["normal", !0, "aggressive"].indexOf(b.trimWhitespaces), f = "aggressive" === b.trimWhitespaces, g = !!b.removeNewlineBetweenFullWidthChars, q = !1 !== b.keepCDATASections, y = !1 !== b.keepComments, p = !0 === b.keepEmptyConditionalComment, A = b.instructionAttrPrefix || ":", C;
  O(a, function(d, z, l) {
    var r = d[0], t = d[1], B = 1;
    switch(T(d)) {
      case 9:
        k && (d[1] = t.split("\n").join(" ").split("  ").join(" "));
        break;
      case 3:
        N(d) || (t = d);
        if (L(t)) {
          if (C || (t = K(t), k && (t = e(t, f, g))), "" !== t) {
            z[l] = t;
          } else {
            return z.splice(l, 1), -1;
          }
        }
        break;
      case 4:
        if (!q) {
          return z.splice(l, 1), -1;
        }
        break;
      case 8:
        if (!y) {
          return z.splice(l, 1), -1;
        }
        break;
      case 15:
        var u = z[l - 1];
        if (!p && u && 14 === u[0]) {
          return z.splice(l - 1, 2), -2;
        }
        break;
      case 1:
      case 17:
        r === +r && (r = t, B = 2);
        r = ua(r)[0];
        var F = d[B];
        if (!N(F) && F && "object" === typeof F) {
          z = B - 1;
          l = 0;
          t = ua(d[z]);
          var n = t[1], v = t[2];
          t = t[0];
          for (w in F) {
            if (F = 0 === w.indexOf(A)) {
              var w = w.substr(A.length);
              "className" === w && (w = "class");
            }
            ++l;
          }
          d[z] = va(t, n, v);
          0 === l && d.splice(B, 1);
        }
        if (ta[r]) {
          h(d, f), C = d;
        } else if (sa[r]) {
          d = C = d;
          r = ra(d);
          B = d.length;
          for (var c, x, m; r < B; ++r) {
            w = d[r], 3 === T(w) && (u = u || r, c = c || w, x = r, m = w);
          }
          u && (N(c) && (c = c[1]), N(m) && (m = m[1]), u === x ? L(c) && (c = K(c), c = V(U(c, "\n"), "\n"), d[u] = S(c)) : (L(c) && (c = K(c), c = U(c, "\n"), d[u] = S(c)), L(m) && (m = K(m), m = V(m, "\n"), d[x] = S(m))));
        }
    }
  }, function(d, z, l) {
    if (!p) {
      switch(T(d)) {
        case 13:
        case 16:
          if (2 === d.length) {
            return z.splice(l, 1), -1;
          }
      }
    }
    C === d && (C = null);
  }) && ya(a);
}
function ya(a) {
  function b() {
    k.splice(f, 0, S(e));
    e = "";
  }
  var e = "", h, k, f;
  O(a, function(g, q, y, p) {
    if (e && h !== p) {
      return b(), 1;
    }
    if (3 === T(g)) {
      return e = Q(g) ? e + g : e + g[1], q.splice(y, 1), h = p, k = q, f = y, -1;
    }
    if (e) {
      return b(), 1;
    }
  });
  e && b();
}
;function W(a, b, e, h) {
  h = h || {};
  const k = h.argumentBrackets || "()";
  a = za(a, h.instructionAttrPrefix || ":", k.substr(0, k.length / 2), k.substr(k.length / 2), !!b, e);
  null == h.trimWhitespaces && (h.trimWhitespaces = !0);
  null == h.keepCDATASections && (h.keepCDATASections = !1);
  null == h.keepComments && (h.keepComments = !1);
  null == h.keepEmptyConditionalComment && (h.keepEmptyConditionalComment = !1);
  xa(a, h);
  return a;
}
function Aa(a, b, e, h) {
  var k = a.indexOf(b);
  e = a.lastIndexOf(e);
  var f = V(U(-1 === k ? a : a.substr(0, k), " "), " ");
  if (-1 !== k) {
    try {
      var g = JSON.parse("[" + a.substring(k + b.length, e) + "]");
    } catch (q) {
      h && h(q);
    }
  }
  return g && g.length ? [f, g] : [f];
}
function za(a, b, e, h, k, f) {
  b = new Ba(b, e, h, k, f);
  ka(a, b, a.length);
  return b.ba;
}
function Ba(a, b, e, h, k) {
  this.ga = a;
  this.ea = b;
  this.da = e;
  this.ia = h;
  this.aa = k;
  this.$ = this.ba = [11];
  this.fa = [this.ba];
  this.ha = !1;
}
Ba.prototype.ja = function(a) {
  this.aa && this.aa(a);
};
function na(a, b, e, h) {
  var k = 0, f;
  if (e) {
    for (f in e) {
      var g = da[f] ? 1 : e[f];
      if ("id" === f) {
        var q = g;
        delete e[f];
      } else if ("class" === f) {
        var y = g;
        delete e[f];
      } else {
        if ("style" === f) {
          g = wa(g);
          if (!g) {
            delete e[f];
            continue;
          }
          var p = void 0;
          var A = g, C = [], d = -1;
          for (p in A) {
            g = A[p];
            "0px" === g && (g = 0);
            for (var z = ++d, l, r = [], t = p.split(""), B = t.length; B;) {
              l = t[--B], "A" <= l && "Z" >= l && (l = "-" + l.toLowerCase()), r[B] = l;
            }
            l = r.join("");
            C[z] = l + ":" + g;
          }
          g = C.join(";");
        } else {
          f.startsWith(a.ga) && (p = Aa(g, a.ea, a.da, a.aa), p[1] ? (g = [p[0]], g.push.apply(g, p[1])) : g = p[0]);
        }
        e[f] = S(g);
        ++k;
      }
    }
  }
  b = [va(b, q, y)];
  k && (b[1] = e);
  a.$.push(b);
  h || (b.unshift(17), a.$ = b, a.fa.push(b));
}
function ma(a, b, e, h) {
  h ? a.ia && a.$.push([18, b]) : e && a.ia || (b === ua(a.$[1])[0] ? (a.$.shift(), a.fa.pop(), a.$ = a.fa[a.fa.length - 1]) : a.aa && a.aa("End tag error! " + b));
}
function pa(a, b) {
  function e(k, f, g, q) {
    f = k.indexOf(f) + f.length;
    g = q ? k.lastIndexOf(g) : k.indexOf(g, f);
    return k.substring(f, g);
  }
  if (b.startsWith("[if") && 0 < b.indexOf("<![endif]")) {
    var h = za(e(b, ">", "<![endif]", !0), a.ga, a.ea, a.da, !0, a.aa);
    h.splice(0, 1, 13, e(b, "[", "]", !1));
  } else {
    b.startsWith("{") && 2 < b.indexOf("};") ? (h = za(b.substring(b.indexOf("};") + 2), a.ga, a.ea, a.da, !0, a.aa), h.splice(0, 1, 16, e(b, "{", "};", !1))) : b.startsWith("[if") && 0 < b.indexOf("><!") ? (h = [14, e(b, "[", "]", !1)], a.ha = !0) : "<![endif]" === b && a.ha ? (h = [15], a.ha = !1) : h = [8, S(K(b))];
  }
  a.$.push(h);
}
function qa(a, b) {
  a.$.push([4, S(K(b))]);
}
function oa(a, b) {
  b = Aa(b, a.ea, a.da, a.aa);
  var e = [7, b[0]];
  b[1] && e.push.apply(e, b[1]);
  a.$.push(e);
}
;module.exports = W;
W.DOCUMENT_NODE = 9;
W.DOCUMENT_FRAGMENT_NODE = 11;
W.ELEMENT_NODE = 1;
W.TEXT_NODE = 3;
W.CDATA_SECTION = 4;
W.PROCESSING_INSTRUCTION = 7;
W.COMMENT_NODE = 8;
W.COND_CMT_HIDE_LOWER = 13;
W.COND_CMT_SHOW_LOWER_START = 14;
W.NETSCAPE4_COND_CMT_HIDE_LOWER = 16;
W.ELEMENT_START_TAG = 17;
W.ELEMENT_END_TAG = 18;
W.gulp = function(a, b) {
  const e = require("plugin-error"), h = require("through2"), k = b || {}, f = k.prettify;
  let g = 0, q = 0, y = 0;
  return h.obj(function(p, A, C) {
    if (p.isNull()) {
      return C();
    }
    if (p.isStream()) {
      return this.emit("error", new e("html2json", "Streaming not supported")), C();
    }
    if (".html" === p.extname || ".htm" === p.extname || ".xhtml" === p.extname || ".php" === p.extname) {
      try {
        const d = p.contents.toString(A), z = performance.now(), l = W(d, !1, a, k);
        ++g;
        q += d.length;
        y += performance.now() - z;
        p.contents = Buffer.from(JSON.stringify(l, null, f ? "    " : ""));
        p.stem += p.extname;
        p.extname = ".json";
      } catch (d) {
        return this.emit("error", new e("html2json", d)), C();
      }
    }
    C(null, p);
  }, function(p) {
    console.log("[html2json] done!");
    console.log("  Number of files: " + g);
    console.log("  Total file size: " + (q / 100 | 0) / 10 + "KB");
    console.log("  Total Time     : " + (y | 0) + "ms");
    console.log("  Time per file  : " + (y / g * 100 | 0) / 100 + "ms");
    console.log("  Time per size  : " + (y / q * 1E5 | 0) + "ms/100KB");
    p();
  });
};

