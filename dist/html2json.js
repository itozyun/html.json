var aa = {xml:!0, svg:!0, math:!0}, ba = {async:!0, autofocus:!0, checked:!0, compact:!0, declare:!0, defer:!0, disabled:!0, draggable:!0, hidden:!0, ismap:!0, loop:!0, multiple:!0, nohref:!0, noresize:!0, noshade:!0, novalidate:!0, nowrap:!0, readonly:!0, required:!0, reversed:!0, scoped:!0, selected:!0}, ca = {AREA:!0, BASE:!0, BASEFONT:!0, BR:!0, BGSOUND:!0, COL:!0, COMMAND:!0, FRAME:!0, HR:!0, IMG:!0, INPUT:!0, ISINDEX:!0, KEYGEN:!0, LINK:!0, META:!0, PARAM:!0, SOURCE:!0, TRACK:!0, EMBED:!0, 
WBR:!0, area:!0, base:!0, basefont:!0, br:!0, bgsound:!0, col:!0, command:!0, frame:!0, hr:!0, img:!0, input:!0, isindex:!0, keygen:!0, link:!0, meta:!0, param:!0, source:!0, track:!0, embed:!0, wbr:!0}, da = {SCRIPT:!0, STYLE:!0, TEXTAREA:!0, TITLE:!0, PLAINTEXT:!0, XMP:!0, LISTING:!0, script:!0, style:!0, textarea:!0, title:!0, plaintext:!0, xmp:!0, listing:!0}, ea = {TEXTAREA:!0, TITLE:!0, textarea:!0, title:!0}, F = {CAPTION:{ARTICLE:!0, SECTION:!0, NAV:!0, ASIDE:!0, H1:!0, H2:!0, H3:!0, H4:!0, 
H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, 
SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, DD:{ARTICLE:!0, SECTION:!0, NAV:!0, ASIDE:!0, H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, 
I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, TABLE:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, DT:{ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, 
A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, TABLE:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, 
SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, P:{A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, 
SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, HTML:{HEAD:!0, BODY:!0}, HEAD:{TITLE:!0, BASE:!0, BGSOUND:!0, LINK:!0, META:!0, STYLE:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0}, COLGROUP:{COL:!0}, OPTGROUP:{OPTION:!0}, OPTION:{}, TBODY:{TR:!0}, TR:{TH:!0, TD:!0}, RBC:{RB:!0, RP:!0, RT:!0}};
F.LI = F.TD = F.DD;
F.TH = F.DT;
F.RB = F.RP = F.RT = F.P;
F.TFOOT = F.THEAD = F.TBODY;
F.RTC = F.RBC;
var G = {a:2, b:2, c:2, d:2, e:2, f:2, g:2, h:2, i:2, j:2, k:2, l:2, m:2, n:2, o:2, p:2, q:2, r:2, s:2, t:2, u:2, v:2, w:2, x:2, y:2, z:2, A:1, B:1, C:1, D:1, E:1, F:1, G:1, H:1, I:1, J:1, K:1, L:1, M:1, N:1, O:1, P:1, Q:1, R:1, S:1, T:1, U:1, V:1, W:1, X:1, Y:1, Z:1, "\t":4, "\n":4, "\f":4, "\r":4, " ":4};
function fa(a, b, c) {
  function f() {
    l = a.indexOf("<", l + 1);
    -1 === l && (l = a.length, g());
  }
  function g() {
    if (l) {
      var v = a.substring(0, l);
      (v = A && !ea[w] ? v : d(v)) && b.$.push([3, H(v)]);
      a = a.substring(l);
      l = 0;
    }
  }
  function e(v) {
    b.ja && b.ja(v);
  }
  function d(v) {
    return v.split("&lt;").join("<").split("&gt;").join(">").split("&amp;lt;").join("&lt;").split("&amp;gt;").join("&gt;");
  }
  function p(v, r, B) {
    for (var t = 0, h = B.length, x = 3, k, K; x < h && 2 !== t;) {
      K = B.charAt(x);
      switch(t) {
        case 0:
          G[K] & 4 ? t = 1 : ">" === K && (t = 2);
          t && (k = B.substring(2, x));
          break;
        case 1:
          ">" === K && (t = 2);
      }
      ++x;
    }
    return 2 === t ? (ca[k] || y(v, r, c || m ? k : k.toUpperCase(), !1), x) : 0;
  }
  function y(v, r, B, t) {
    var h = 0, x = v.length;
    if (B) {
      for (h = x; 0 <= h && v[--h] !== B;) {
      }
    }
    if (0 <= h) {
      for (; h < x;) {
        la(r, v[--x], t && !F[v[x]], !1), c && aa[v[x]] && (c = !!r.ka);
      }
      v.length = h;
      if (m) {
        for (m = !1, x = h; x;) {
          if (0 < v[--x].indexOf(":")) {
            m = !0;
            break;
          }
        }
      }
    } else {
      la(r, B, !1, !0);
    }
  }
  function q(v, r, B, t) {
    function h(Y, Z) {
      function ha(ra) {
        return d(ra).split('\\"').join('"').split("\\'").join("'").split("&quot;").join('"').split("&apos;").join("'");
      }
      ia[Y] = !0 === Z ? !0 : ba[Y.toLowerCase()] ? c ? ha(Z || Y) : !0 : ha(Z || "");
      ++ja;
    }
    function x() {
      (T = "/>" === t.substr(C, 2)) && ++C;
      return T;
    }
    for (var k = 1, K = t.length, C = 2, ia = {}, ja = 0, T = !1, E, O, I, Q, ka, W; C < K && 9 > k;) {
      E = t.charAt(C);
      switch(k) {
        case 1:
          if (G[E] & 4) {
            k = 2, O = t.substring(1, C);
          } else if (">" === E || x()) {
            k = 9, O = t.substring(1, C);
          }
          break;
        case 2:
          ">" === E || x() ? k = 9 : G[E] & 4 || (k = 3, I = C);
          break;
        case 3:
          if ("=" === E) {
            k = 5, Q = t.substring(I, C);
          } else if (G[E] & 4) {
            k = 4, Q = t.substring(I, C);
          } else if (">" === E || x()) {
            k = 9, h(t.substring(I, C), !0);
          }
          break;
        case 4:
          "=" === E ? k = 5 : ">" === E || x() ? (k = 9, h(Q, !0)) : G[E] & 4 || (k = 3, h(Q, !0), I = C);
          break;
        case 5:
          '"' === E || "'" === E ? (k = 6, ka = E, I = C + 1) : G[E] & 4 || (k = 7, I = C);
          W = !1;
          break;
        case 6:
          W || E !== ka || (k = 2, h(Q, t.substring(I, C)));
          W = "\\" === E && !W;
          break;
        case 7:
          G[E] & 4 ? k = 2 : ">" === E && (k = 9), 7 !== k && h(Q, t.substring(I, C));
      }
      ++C;
    }
    if (9 === k) {
      k = O.toUpperCase();
      c ||= !!aa[O];
      m ||= 0 < O.indexOf(":");
      if (!c && !m) {
        for (; r;) {
          if (F[r] && !F[r][k]) {
            y(v, B, r, !1), r = v[v.length - 1];
          } else {
            break;
          }
        }
      }
      (T = T || !!ca[k]) || (v[v.length] = c || m ? O : k);
      ma(B, c || m ? O : k, ja ? ia : null, T);
      return C;
    }
    return 0;
  }
  for (var l = 0, m = !1, z = [], D = a.length - l, w, A, u, n; a;) {
    w = z[z.length - 1];
    A = da[w];
    if (a.indexOf("<?") === l) {
      if (g(), u = a.indexOf("?>"), -1 !== u) {
        na(b, d(a.substring(2, u))), a = a.substring(u + 2);
      } else {
        e(a);
        return;
      }
    } else if (a.indexOf("</", l) === l && G[a.charAt(l + 2)] & 3) {
      if (A && ("PLAINTEXT" === w || "plaintext" === w ? n = !0 : a.indexOf(w.toLowerCase(), l) !== l + 2 && a.indexOf(w.toUpperCase(), l) !== l + 2 && (n = !0)), n) {
        f(), n = !1;
      } else {
        if (g(), u = p(z, b, a)) {
          a = a.substring(u);
        } else {
          e(a);
          return;
        }
      }
    } else if (A) {
      f();
    } else if ("<" === a.charAt(l) && G[a.charAt(l + 1)] & 3) {
      if (g(), u = q(z, w, b, a)) {
        a = a.substring(u);
      } else {
        e(a);
        return;
      }
    } else if (a.indexOf("\x3c!--") === l) {
      if (g(), u = a.indexOf("--\x3e"), -1 !== u) {
        oa(b, d(a.substring(4, u))), a = a.substring(u + 3);
      } else {
        e(a);
        return;
      }
    } else if (a.indexOf("<![CDATA[") === l) {
      if (g(), u = a.indexOf("]]\x3e"), -1 !== u) {
        pa(b, d(a.substring(9, u))), a = a.substring(u + 3);
      } else {
        e(a);
        return;
      }
    } else if (a.indexOf("<!DOCTYPE ") === l) {
      if (g(), u = a.indexOf(">"), -1 !== u) {
        b.ba.splice(0, 1, 9, a.substring(l, u + 1)), a = a.substring(u + 1);
      } else {
        e(a);
        return;
      }
    } else {
      f();
    }
    u = a.length - l;
    if (u === D) {
      e(a);
      return;
    }
    D = u;
  }
  y(z, b, "", !0);
}
;function J(a) {
  return a === "" + a;
}
function L(a) {
  return !!a && a.constructor === Array;
}
;function M(a, b, c) {
  var f = a, g = N(f), e = 0, d = b(a, null, -1, e / 3), p = [-1, a, g], y = !1;
  if (Infinity === d || -Infinity === d) {
    return !1;
  }
  if (0 < f.length - g) {
    do {
      var q = ++p[e];
      var l = f[q + g];
      if (void 0 === l) {
        if (p.length = e, e -= 3, f = p[e + 1], g = p[e + 2], c && f) {
          q = p[e] + g;
          d = c(f[q], f, q, e / 3 + 1);
          if (Infinity === d) {
            return y;
          }
          -Infinity !== d && (-1 >= d || 1 <= d) && (p[e] += d, y = !0);
        }
      } else {
        d = b(l, f, q + g, e / 3 + 1);
        if (Infinity === d) {
          return y;
        }
        if (-Infinity !== d) {
          if (-1 >= d) {
            p[e] += d, y = !0;
          } else {
            if (1 <= d && (p[e] += d, y = !0), N(l) < l.length) {
              e += 3, p[e] = -1, p[e + 1] = f = l, p[e + 2] = g = N(l);
            } else if (c && f) {
              d = c(l, f, q + g, e / 3 + 1);
              if (Infinity === d) {
                return y;
              }
              -Infinity !== d && (-1 >= d || 1 <= d) && (p[e] += d, y = !0);
            }
          }
        }
      }
    } while (0 <= e);
  }
  c && c(a, null, -1, 0);
  return y;
}
;var qa = {SCRIPT:!0, STYLE:!0, TEXTAREA:!0, script:!0, style:!0, textarea:!0}, sa = {PRE:!0, LISTING:!0, pre:!0, listing:!0};
function P(a) {
  return J(a) || a === +a;
}
function R(a) {
  var b;
  if (b = a === "" + +a) {
    b = +a, b = b === +b && b !== b + 1;
  }
  return b ? +a : a;
}
function S(a) {
  if (P(a)) {
    a = 3;
  } else {
    if (L(a)) {
      if (J(a[0])) {
        a = 1;
      } else {
        var b = a[0];
        a = b === +b ? a[0] : -1;
      }
    } else {
      a = -1;
    }
  }
  return a;
}
function N(a) {
  var b = a[0], c = S(a);
  return 1 === c || 17 === c ? (b = b === +b ? 2 : 1, a = a[b], !L(a) && a && "object" === typeof a ? b + 1 : b) : 11 === b ? 1 : 9 === b || 13 === b || 16 === b ? 2 : Infinity;
}
function H(a) {
  return a.split("\r\n").join("\n").split("\r").join("\n");
}
function U(a, b) {
  for (; a.charAt(0) === b;) {
    a = a.substr(1);
  }
  return a;
}
function V(a, b) {
  for (; a.charAt(a.length - 1) === b;) {
    a = a.substr(0, a.length - 1);
  }
  return a;
}
function ta(a) {
  var b = a.indexOf("#"), c = a.indexOf("."), f = "", g = "";
  b < c ? (f = a.split(".")[1], a = a.split(".")[0], 0 < b && (g = a.split("#")[1], a = a.split("#")[0])) : c < b && (g = a.split("#")[1], a = a.split("#")[0], 0 < c && (f = a.split(".")[1], a = a.split(".")[0]));
  return [a, g, f];
}
function ua(a, b, c) {
  b && (a += "#" + b);
  c && (a += "." + c);
  return a;
}
function va(a) {
  function b(m, z) {
    e[V(m, " ")] = "0px" === z ? 0 : R(V(z, " "));
    ++d;
  }
  for (var c = 0, f = a.length, g = 0, e = {}, d = 0, p, y, q = "", l; g < f; ++g) {
    p = a.charAt(g);
    switch(c) {
      case 0:
        if (G[p] & 4) {
          break;
        }
        y = g;
        c = 1;
      case 1:
        ":" === p && (l = a.substring(y, g), c = 2);
        break;
      case 2:
        if (G[p] & 4) {
          break;
        }
        y = g;
        c = 3;
      case 3:
        '"' === p || "'" === p ? (q = p, c = 4) : ";" === p && (b(l, a.substring(y, g)), c = 0);
        break;
      case 4:
        q === p && (q = "", c = 3);
    }
    3 <= c && b(l, a.substring(y));
  }
  return d ? e : null;
}
;function wa(a, b) {
  function c(m, z) {
    function D(r) {
      return r.split("\n").join("").split(" ").join("").split("\t").join("");
    }
    function w(r) {
      var B;
      M(r, function(t, h, x) {
        3 === S(t) && (B = [t, h, x]);
      });
      return B;
    }
    var A, u;
    for (M(m, function(r, B, t) {
      if (3 === S(r)) {
        r = "" + (P(r) ? r : r[1]);
        if (D(r)) {
          return B.splice(t, 1, U(r, "\n")), Infinity;
        }
        B.splice(t, 1);
        return -1;
      }
    }); A = w(m);) {
      var n = A[0];
      var v = A[1];
      A = A[2];
      n = "" + (P(n) ? n : n[1]);
      if (D(n)) {
        v.splice(A, 1, V(n, "\n"));
        break;
      } else {
        v.splice(A, 1);
      }
    }
    z && M(m, function(r, B, t) {
      if (3 === S(r)) {
        for (var h = "" + (P(r) ? r : r[1]), x = h.split("\n"), k = 0, K = x.length, C; k < K - 1; ++k) {
          for (h = x[k];;) {
            if (C = h.charAt(h.length - 1), "\t" === C || " " === C) {
              h = h.substr(0, h.length - 1);
            } else {
              break;
            }
          }
          x[k] = h;
        }
        h = x.join("\n");
        if ("\n" === h && u) {
          return r = u[0], x = u[1], k = u[2], P(r) ? x[k] += h : r[1] += h, B.splice(t, 1), -1;
        }
        P(r) ? B.splice(t, 1, r = h) : r[1] = h;
        u = [r, B, t];
      }
    });
  }
  b = b || {};
  var f = -1 !== ["normal", !0, "aggressive"].indexOf(b.trimWhitespaces), g = "aggressive" === b.trimWhitespaces, e = !!b.removeNewlineBetweenFullWidthChars, d = !1 !== b.keepCDATASections, p = !1 !== b.keepComments, y = !0 === b.keepEmptyConditionalComment, q = b.instructionAttrPrefix || ":", l;
  M(a, function(m, z, D) {
    var w = m[0], A = m[1], u = 1;
    switch(S(m)) {
      case 9:
        f && (m[1] = A.split("\n").join(" ").split("  ").join(" "));
        break;
      case 3:
        L(m) || (A = m);
        if (J(A)) {
          if (!l && (A = H(A), f)) {
            var n = A;
            e && (n = n.replace(/([\uFF01-\uFF60\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF])\s([\uFF01-\uFF60\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF])/g, "$1$2"));
            for (n = n.split("\t").join(" "); 0 <= n.indexOf("\n\n");) {
              n = n.split("\n\n").join("\n");
            }
            if (g) {
              var v = "\n" === n.charAt(0) && /\n[ ]*$/.test(n);
            }
            n = V(n, "\n");
            for (n = n.split("\n").join(" "); 0 <= n.indexOf("  ");) {
              n = n.split("  ").join(" ");
            }
            v && (n = V(U(n, " "), " "));
            n = n.split("\\u0020").join(" ").split("&#x20;").join(" ").split("&#32;").join(" ");
            A = R(n);
          }
          if ("" !== A) {
            z[D] = A;
          } else {
            return z.splice(D, 1), -1;
          }
        }
        break;
      case 4:
        if (!d) {
          return z.splice(D, 1), -1;
        }
        break;
      case 8:
        if (!p) {
          return z.splice(D, 1), -1;
        }
        break;
      case 15:
        n = z[D - 1];
        if (!y && n && 14 === n[0]) {
          return z.splice(D - 1, 2), -2;
        }
        break;
      case 1:
      case 17:
        w === +w && (w = A, u = 2);
        w = ta(w)[0];
        var r = m[u];
        if (!L(r) && r && "object" === typeof r) {
          z = u - 1;
          D = 0;
          v = ta(m[z]);
          A = v[1];
          var B = v[2];
          v = v[0];
          for (t in r) {
            if (r = 0 === t.indexOf(q)) {
              var t = t.substr(q.length);
              "className" === t && (t = "class");
            }
            ++D;
          }
          m[z] = ua(v, A, B);
          0 === D && m.splice(u, 1);
        }
        if (sa[w]) {
          c(m, g), l = m;
        } else if (qa[w]) {
          m = l = m;
          w = N(m);
          u = m.length;
          for (var h, x, k; w < u; ++w) {
            t = m[w], 3 === S(t) && (n = n || w, h = h || t, x = w, k = t);
          }
          n && (L(h) && (h = h[1]), L(k) && (k = k[1]), n === x ? J(h) && (h = H(h), h = V(U(h, "\n"), "\n"), m[n] = R(h)) : (J(h) && (h = H(h), h = U(h, "\n"), m[n] = R(h)), J(k) && (k = H(k), k = V(k, "\n"), m[x] = R(k))));
        }
    }
  }, function(m, z, D) {
    if (!y) {
      switch(S(m)) {
        case 13:
        case 16:
          if (2 === m.length) {
            return z.splice(D, 1), -1;
          }
      }
    }
    l === m && (l = null);
  }) && xa(a);
}
function xa(a) {
  function b() {
    g.splice(e, 0, R(c));
    c = "";
  }
  var c = "", f, g, e;
  M(a, function(d, p, y, q) {
    if (c && f !== q) {
      return b(), 1;
    }
    if (3 === S(d)) {
      return c = P(d) ? c + d : c + d[1], p.splice(y, 1), f = q, g = p, e = y, -1;
    }
    if (c) {
      return b(), 1;
    }
  });
  c && b();
}
;function X(a, b, c, f) {
  f = f || {};
  const g = f.argumentBrackets || "()";
  a = ya(a, f.instructionAttrPrefix || ":", g.substr(0, g.length / 2), g.substr(g.length / 2), !!b, c);
  null == f.trimWhitespaces && (f.trimWhitespaces = !0);
  null == f.keepCDATASections && (f.keepCDATASections = !1);
  null == f.keepComments && (f.keepComments = !1);
  null == f.keepEmptyConditionalComment && (f.keepEmptyConditionalComment = !1);
  wa(a, f);
  return a;
}
function za(a, b, c, f) {
  var g = a.indexOf(b);
  c = a.lastIndexOf(c);
  var e = V(U(-1 === g ? a : a.substr(0, g), " "), " ");
  if (-1 !== g) {
    try {
      var d = JSON.parse("[" + a.substring(g + b.length, c) + "]");
    } catch (p) {
      f && f(p);
    }
  }
  return d && d.length ? [e, d] : [e];
}
function ya(a, b, c, f, g, e) {
  b = new Aa(b, c, f, g, e);
  fa(a, b, !!b.ka);
  return b.ba;
}
function Aa(a, b, c, f, g) {
  this.ga = a;
  this.ea = b;
  this.da = c;
  this.ia = f;
  this.aa = g;
  this.$ = this.ba = [11];
  this.fa = [this.ba];
  this.ha = !1;
}
Aa.prototype.ja = function(a) {
  this.aa && this.aa(a);
};
function ma(a, b, c, f) {
  var g = 0, e;
  if (c) {
    for (e in c) {
      var d = ba[e] ? 1 : c[e];
      if ("id" === e) {
        var p = d;
        delete c[e];
      } else if ("class" === e) {
        var y = d;
        delete c[e];
      } else {
        if ("style" === e) {
          var q = void 0;
          var l = va(d), m = [], z = -1;
          for (q in l) {
            d = l[q];
            "0px" === d && (d = 0);
            for (var D = ++z, w, A = [], u = q.split(""), n = u.length; n;) {
              w = u[--n], "A" <= w && "Z" >= w && (w = "-" + w.toLowerCase()), A[n] = w;
            }
            w = A.join("");
            m[D] = w + ":" + ("" + d).split("&lt;").join("&amp;lt;").split("&gt;").join("&amp;gt;").split("<").join("&lt;").split(">").join("&gt;");
          }
          d = m.join(";");
        } else {
          e.startsWith(a.ga) && (q = za(d, a.ea, a.da, a.aa), q[1] ? (d = [q[0]], d.push.apply(d, q[1])) : d = q[0]);
        }
        c[e] = R(d);
        ++g;
      }
    }
  }
  b = [ua(b, p, y)];
  g && (b[1] = c);
  a.$.push(b);
  f || (b.unshift(17), a.$ = b, a.fa.push(b));
}
function la(a, b, c, f) {
  f ? a.ia && a.$.push([18, b]) : c && a.ia || (b === ta(a.$[1])[0] ? (a.$.shift(), a.fa.pop(), a.$ = a.fa[a.fa.length - 1]) : a.aa && a.aa("End tag error! " + b));
}
function oa(a, b) {
  function c(g, e, d, p) {
    e = g.indexOf(e) + e.length;
    d = p ? g.lastIndexOf(d) : g.indexOf(d, e);
    return g.substring(e, d);
  }
  if (b.startsWith("[if") && 0 < b.indexOf("<![endif]")) {
    var f = ya(c(b, ">", "<![endif]", !0), a.ga, a.ea, a.da, !0, a.aa);
    f.splice(0, 1, 13, c(b, "[", "]", !1));
  } else {
    b.startsWith("{") && 2 < b.indexOf("};") ? (f = ya(b.substring(b.indexOf("};") + 2), a.ga, a.ea, a.da, !0, a.aa), f.splice(0, 1, 16, c(b, "{", "};", !1))) : b.startsWith("[if") && 0 < b.indexOf("><!") ? (f = [14, c(b, "[", "]", !1)], a.ha = !0) : "<![endif]" === b && a.ha ? (f = [15], a.ha = !1) : f = [8, R(H(b))];
  }
  a.$.push(f);
}
function pa(a, b) {
  a.$.push([4, R(H(b))]);
}
function na(a, b) {
  b = za(b, a.ea, a.da, a.aa);
  var c = [7, b[0]];
  b[1] && c.push.apply(c, b[1]);
  a.$.push(c);
}
;module.exports = X;
X.DOCUMENT_NODE = 9;
X.DOCUMENT_FRAGMENT_NODE = 11;
X.ELEMENT_NODE = 1;
X.TEXT_NODE = 3;
X.CDATA_SECTION = 4;
X.PROCESSING_INSTRUCTION = 7;
X.COMMENT_NODE = 8;
X.COND_CMT_HIDE_LOWER = 13;
X.COND_CMT_SHOW_LOWER_START = 14;
X.NETSCAPE4_COND_CMT_HIDE_LOWER = 16;
X.ELEMENT_START_TAG = 17;
X.ELEMENT_END_TAG = 18;
X.gulp = function(a, b) {
  const c = require("plugin-error"), f = require("through2"), g = b || {}, e = g.prettify;
  let d = 0, p = 0, y = 0;
  return f.obj(function(q, l, m) {
    if (q.isNull()) {
      return m();
    }
    if (q.isStream()) {
      return this.emit("error", new c("html2json", "Streaming not supported")), m();
    }
    if (".html" === q.extname || ".htm" === q.extname || ".xhtml" === q.extname || ".php" === q.extname) {
      try {
        const z = q.contents.toString(l), D = performance.now(), w = X(z, !1, a, g);
        ++d;
        p += z.length;
        y += performance.now() - D;
        q.contents = Buffer.from(JSON.stringify(w, null, e ? "    " : ""));
        q.stem += q.extname;
        q.extname = ".json";
      } catch (z) {
        return this.emit("error", new c("html2json", z)), m();
      }
    }
    m(null, q);
  }, function(q) {
    console.log("[html2json] done!");
    console.log("  Number of files: " + d);
    console.log("  Total file size: " + (p / 100 | 0) / 10 + "KB");
    console.log("  Total Time     : " + (y | 0) + "ms");
    console.log("  Time per file  : " + (y / d * 100 | 0) / 100 + "ms");
    console.log("  Time per size  : " + (y / p * 1E5 | 0) + "ms/100KB");
    q();
  });
};

