var ca = {xml:!0, svg:!0, math:!0}, da = {async:!0, autofocus:!0, checked:!0, compact:!0, declare:!0, defer:!0, disabled:!0, draggable:!0, hidden:!0, ismap:!0, loop:!0, multiple:!0, nohref:!0, noresize:!0, noshade:!0, novalidate:!0, nowrap:!0, readonly:!0, required:!0, reversed:!0, scoped:!0, selected:!0}, ea = {AREA:!0, BASE:!0, BASEFONT:!0, BR:!0, BGSOUND:!0, COL:!0, COMMAND:!0, FRAME:!0, HR:!0, IMG:!0, INPUT:!0, ISINDEX:!0, KEYGEN:!0, LINK:!0, META:!0, PARAM:!0, SOURCE:!0, TRACK:!0, EMBED:!0, 
WBR:!0, area:!0, base:!0, basefont:!0, br:!0, bgsound:!0, col:!0, command:!0, frame:!0, hr:!0, img:!0, input:!0, isindex:!0, keygen:!0, link:!0, meta:!0, param:!0, source:!0, track:!0, embed:!0, wbr:!0}, fa = {SCRIPT:!0, STYLE:!0, TEXTAREA:!0, TITLE:!0, PLAINTEXT:!0, XMP:!0, LISTING:!0, script:!0, style:!0, textarea:!0, title:!0, plaintext:!0, xmp:!0, listing:!0}, ha = {TEXTAREA:!0, TITLE:!0, textarea:!0, title:!0}, F = {CAPTION:{ARTICLE:!0, SECTION:!0, NAV:!0, ASIDE:!0, H1:!0, H2:!0, H3:!0, H4:!0, 
H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, 
SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, DD:{ARTICLE:!0, SECTION:!0, NAV:!0, ASIDE:!0, H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, 
I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, TABLE:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, DT:{ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, 
A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, TABLE:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, 
SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, P:{A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, 
SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, HTML:{HEAD:!0, BODY:!0}, HEAD:{TITLE:!0, BASE:!0, BGSOUND:!0, LINK:!0, META:!0, STYLE:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0}, COLGROUP:{COL:!0}, OPTGROUP:{OPTION:!0}, OPTION:{}, TBODY:{TR:!0}, TR:{TH:!0, TD:!0}, RBC:{RB:!0, RP:!0, RT:!0}};
F.LI = F.TD = F.DD;
F.TH = F.DT;
F.RB = F.RP = F.RT = F.P;
F.TFOOT = F.THEAD = F.TBODY;
F.RTC = F.RBC;
var G = {a:2, b:2, c:2, d:2, e:2, f:2, g:2, h:2, i:2, j:2, k:2, l:2, m:2, n:2, o:2, p:2, q:2, r:2, s:2, t:2, u:2, v:2, w:2, x:2, y:2, z:2, A:1, B:1, C:1, D:1, E:1, F:1, G:1, H:1, I:1, J:1, K:1, L:1, M:1, N:1, O:1, P:1, Q:1, R:1, S:1, T:1, U:1, V:1, W:1, X:1, Y:1, Z:1, "\t":4, "\n":4, "\f":4, "\r":4, " ":4};
function H(a) {
  return a.split("&lt;").join("<").split("&gt;").join(">").split("&amp;lt;").join("&lt;").split("&amp;gt;").join("&gt;");
}
function ia(a) {
  return H(a).split('\\"').join('"').split("\\'").join("'").split("&quot;").join('"').split("&apos;").join("'");
}
function ja(a, b, c) {
  function h() {
    d = a.indexOf("<", d + 1);
    -1 === d && (d = a.length, k());
  }
  function k() {
    if (d) {
      var e = a.substr(0, d);
      (e = v && !ha[y] ? e : H(e)) && b.$.push([3, J(e)]);
      a = a.substr(d);
      d = 0;
    }
  }
  function f(e) {
    b.ja && b.ja(e);
  }
  function g(e, B, q) {
    for (var u = 0, t = q.length, l = 3, r, A; l < t && 2 !== u;) {
      A = q.charAt(l);
      switch(u) {
        case 0:
          G[A] & 4 ? u = 1 : ">" === A && (u = 2);
          u && (r = q.substring(2, l));
          break;
        case 1:
          ">" === A && (u = 2);
      }
      ++l;
    }
    return 2 === u ? (ea[r] || n(e, B, c || w ? r : r.toUpperCase(), !1), l) : 0;
  }
  function n(e, B, q, u) {
    var t = 0, l = e.length;
    if (q) {
      for (t = l; 0 <= t && e[--t] !== q;) {
      }
    }
    if (0 <= t) {
      for (; t < l;) {
        la(B, e[--l], u && !F[e[l]], !1), c && ca[e[l]] && (c = !!B.ka);
      }
      e.length = t;
      if (w) {
        for (w = !1, l = t; l;) {
          if (0 < e[--l].indexOf(":")) {
            w = !0;
            break;
          }
        }
      }
    } else {
      la(B, q, !1, !0);
    }
  }
  function x(e, B, q, u) {
    function t(aa, ba) {
      X[aa] = !0 === ba ? !0 : da[aa.toLowerCase()] ? c ? ia(ba || aa) : !0 : ia(ba || "");
      ++P;
    }
    function l() {
      (U = "/>" === u.substr(C, 2)) && ++C;
      return U;
    }
    for (var r = 1, A = u.length, C = 2, X = {}, P = 0, U = !1, E, N, I, Q, ka, Y; C < A && 9 > r;) {
      E = u.charAt(C);
      switch(r) {
        case 1:
          if (G[E] & 4) {
            r = 2, N = u.substring(1, C);
          } else if (">" === E || l()) {
            r = 9, N = u.substring(1, C);
          }
          break;
        case 2:
          ">" === E || l() ? r = 9 : G[E] & 4 || (r = 3, I = C);
          break;
        case 3:
          if ("=" === E) {
            r = 5, Q = u.substring(I, C);
          } else if (G[E] & 4) {
            r = 4, Q = u.substring(I, C);
          } else if (">" === E || l()) {
            r = 9, t(u.substring(I, C), !0);
          }
          break;
        case 4:
          "=" === E ? r = 5 : ">" === E || l() ? (r = 9, t(Q, !0)) : G[E] & 4 || (r = 3, t(Q, !0), I = C);
          break;
        case 5:
          '"' === E || "'" === E ? (r = 6, ka = E, I = C + 1) : G[E] & 4 || (r = 7, I = C);
          Y = !1;
          break;
        case 6:
          Y || E !== ka || (r = 2, t(Q, u.substring(I, C)));
          Y = "\\" === E && !Y;
          break;
        case 7:
          G[E] & 4 ? r = 2 : ">" === E && (r = 9), 7 !== r && t(Q, u.substring(I, C));
      }
      ++C;
    }
    if (9 === r) {
      r = N.toUpperCase();
      c ||= !!ca[N];
      w ||= 0 < N.indexOf(":");
      if (!c && !w) {
        for (; B;) {
          if (F[B] && !F[B][r]) {
            n(e, q, B, !1), B = e[e.length - 1];
          } else {
            break;
          }
        }
      }
      (U = U || !!ea[r]) || (e[e.length] = c || w ? N : r);
      ma(q, c || w ? N : r, P ? X : null, U);
      return C;
    }
    return 0;
  }
  for (var d = 0, w = !1, p = [], z = a.length - d, y, v, m, D; a;) {
    y = p[p.length - 1];
    v = fa[y];
    if (a.indexOf("<?") === d) {
      if (k(), m = a.indexOf("?>"), -1 !== m) {
        na(b, H(a.substring(2, m))), a = a.substr(m + 2);
      } else {
        f(a);
        return;
      }
    } else if (a.indexOf("</", d) === d && G[a.charAt(d + 2)] & 3) {
      if (v && ("PLAINTEXT" === y || "plaintext" === y ? D = !0 : a.indexOf(y.toLowerCase(), d) !== d + 2 && a.indexOf(y.toUpperCase(), d) !== d + 2 && (D = !0)), D) {
        h(), D = !1;
      } else {
        if (k(), m = g(p, b, a)) {
          a = a.substr(m);
        } else {
          f(a);
          return;
        }
      }
    } else if (v) {
      h();
    } else if ("<" === a.charAt(d) && G[a.charAt(d + 1)] & 3) {
      if (k(), m = x(p, y, b, a)) {
        a = a.substr(m);
      } else {
        f(a);
        return;
      }
    } else if (a.indexOf("\x3c!--") === d) {
      if (k(), m = a.indexOf("--\x3e"), -1 !== m) {
        oa(b, H(a.substring(4, m))), a = a.substr(m + 3);
      } else {
        f(a);
        return;
      }
    } else if (a.indexOf("<![CDATA[") === d) {
      if (k(), m = a.indexOf("]]\x3e"), -1 !== m) {
        pa(b, H(a.substring(9, m))), a = a.substr(m + 3);
      } else {
        f(a);
        return;
      }
    } else if (a.indexOf("<!DOCTYPE ") === d) {
      if (k(), m = a.indexOf(">"), -1 !== m) {
        b.ba.splice(0, 1, 9, a.substring(d, m + 1)), a = a.substr(m + 1);
      } else {
        f(a);
        return;
      }
    } else {
      h();
    }
    m = a.length - d;
    if (m === z) {
      f(a);
      return;
    }
    z = m;
  }
  n(p, b, "", !0);
}
;function K(a) {
  return a === "" + a;
}
function L(a) {
  return !!a && a.constructor === Array;
}
;function M(a, b, c) {
  var h = a, k = O(h), f = 0, g = b(a, null, -1, f / 3), n = [-1, a, k], x = !1;
  if (Infinity === g || -Infinity === g) {
    return !1;
  }
  if (0 < h.length - k) {
    do {
      var d = ++n[f];
      var w = h[d + k];
      if (void 0 === w) {
        if (n.length = f, f -= 3, h = n[f + 1], k = n[f + 2], c && h) {
          d = n[f] + k;
          g = c(h[d], h, d, f / 3 + 1);
          if (Infinity === g) {
            return x;
          }
          -Infinity !== g && (-1 >= g || 1 <= g) && (n[f] += g, x = !0);
        }
      } else {
        g = b(w, h, d + k, f / 3 + 1);
        if (Infinity === g) {
          return x;
        }
        if (-Infinity !== g) {
          if (-1 >= g) {
            n[f] += g, x = !0;
          } else {
            if (1 <= g && (n[f] += g, x = !0), O(w) < w.length) {
              f += 3, n[f] = -1, n[f + 1] = h = w, n[f + 2] = k = O(w);
            } else if (c && h) {
              g = c(w, h, d + k, f / 3 + 1);
              if (Infinity === g) {
                return x;
              }
              -Infinity !== g && (-1 >= g || 1 <= g) && (n[f] += g, x = !0);
            }
          }
        }
      }
    } while (0 <= f);
  }
  c && c(a, null, -1, 0);
  return x;
}
;var qa = {SCRIPT:!0, STYLE:!0, TEXTAREA:!0, script:!0, style:!0, textarea:!0}, ra = {PRE:!0, LISTING:!0, pre:!0, listing:!0};
function R(a) {
  return K(a) || a === +a;
}
function S(a) {
  var b;
  if (b = a === "" + +a) {
    b = +a, b = b === +b && b !== b + 1;
  }
  return b ? +a : a;
}
function T(a) {
  if (R(a)) {
    a = 3;
  } else {
    if (L(a)) {
      if (K(a[0])) {
        a = 1;
      } else {
        var b = a[0];
        a = b === +b ? a[0] : -1;
      }
    } else {
      a = -1;
    }
  }
  return a;
}
function O(a) {
  var b = a[0], c = T(a);
  return 1 === c || 17 === c ? (b = b === +b ? 2 : 1, a = a[b], !L(a) && a && "object" === typeof a ? b + 1 : b) : 11 === b ? 1 : 9 === b || 13 === b || 16 === b ? 2 : Infinity;
}
function J(a) {
  return a.split("\r\n").join("\n").split("\r").join("\n");
}
function V(a, b) {
  for (; a.charAt(0) === b;) {
    a = a.substr(1);
  }
  return a;
}
function W(a, b) {
  for (; a.charAt(a.length - 1) === b;) {
    a = a.substr(0, a.length - 1);
  }
  return a;
}
function sa(a) {
  var b = a.indexOf("#"), c = a.indexOf("."), h = "", k = "";
  b < c ? (h = a.split(".")[1], a = a.split(".")[0], 0 < b && (k = a.split("#")[1], a = a.split("#")[0])) : c < b && (k = a.split("#")[1], a = a.split("#")[0], 0 < c && (h = a.split(".")[1], a = a.split(".")[0]));
  return [a, k, h];
}
function ta(a, b, c) {
  b && (a += "#" + b);
  c && (a += "." + c);
  return a;
}
function ua(a) {
  function b(p, z) {
    f[W(p, " ")] = "0px" === z ? 0 : S(W(z, " "));
    ++g;
  }
  for (var c = 0, h = a.length, k = 0, f = {}, g = 0, n, x, d = "", w; k < h; ++k) {
    n = a.charAt(k);
    switch(c) {
      case 0:
        if (G[n] & 4) {
          break;
        }
        x = k;
        c = 1;
      case 1:
        ":" === n && (w = a.substring(x, k), c = 2);
        break;
      case 2:
        if (G[n] & 4) {
          break;
        }
        x = k;
        c = 3;
      case 3:
        '"' === n || "'" === n ? (d = n, c = 4) : ";" === n && (b(w, a.substring(x, k)), c = 0);
        break;
      case 4:
        d === n && (d = "", c = 3);
    }
    3 <= c && b(w, a.substring(x));
  }
  return g ? f : null;
}
;function va(a, b) {
  function c(p, z) {
    function y(q) {
      return q.split("\n").join("").split(" ").join("").split("\t").join("");
    }
    function v(q) {
      var u;
      M(q, function(t, l, r) {
        3 === T(t) && (u = [t, l, r]);
      });
      return u;
    }
    var m, D;
    for (M(p, function(q, u, t) {
      if (3 === T(q)) {
        q = "" + (R(q) ? q : q[1]);
        if (y(q)) {
          return u.splice(t, 1, V(q, "\n")), Infinity;
        }
        u.splice(t, 1);
        return -1;
      }
    }); m = v(p);) {
      var e = m[0];
      var B = m[1];
      m = m[2];
      e = "" + (R(e) ? e : e[1]);
      if (y(e)) {
        B.splice(m, 1, W(e, "\n"));
        break;
      } else {
        B.splice(m, 1);
      }
    }
    if (z) {
      for (; M(p, function(q, u, t) {
        if (3 === T(q)) {
          var l = v(p);
          var r = l ? u === l[1] && t === l[2] : !1;
          l = "" + (R(q) ? q : q[1]);
          for (var A = l.split("\n"), C = 0, X = A.length, P; C < X - (r ? 0 : 1); ++C) {
            for (l = A[C];;) {
              if (P = l.charAt(l.length - 1), "\t" === P || " " === P) {
                l = l.substr(0, l.length - 1);
              } else {
                break;
              }
            }
            A[C] = l;
          }
          l = A.join("\n");
          if ("\n" === l && D) {
            return q = D[0], r = D[1], A = D[2], R(q) ? r[A] += l : q[1] += l, u.splice(t, 1), -1;
          }
          R(q) ? u[t] = l : q[1] = l;
          D = [q, u, t];
        }
      });) {
      }
    }
  }
  b = b || {};
  var h = -1 !== ["normal", !0, "aggressive"].indexOf(b.trimWhitespaces), k = "aggressive" === b.trimWhitespaces, f = !!b.removeNewlineBetweenFullWidthChars, g = !1 !== b.keepCDATASections, n = !1 !== b.keepComments, x = !0 === b.keepEmptyConditionalComment, d = b.instructionAttrPrefix || ":", w;
  M(a, function(p, z, y) {
    var v = p[0], m = p[1], D = 1;
    switch(T(p)) {
      case 9:
        h && (p[1] = m.split("\n").join(" ").split("  ").join(" "));
        break;
      case 3:
        L(p) || (m = p);
        if (K(m)) {
          if (!w && (m = J(m), h)) {
            var e = m;
            f && (e = e.replace(/([\uFF01-\uFF60\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF])\s([\uFF01-\uFF60\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF])/g, "$1$2"));
            for (e = e.split("\t").join(" "); 0 <= e.indexOf("\n\n");) {
              e = e.split("\n\n").join("\n");
            }
            if (k) {
              var B = "\n" === e.charAt(0) && /\n[ ]*$/.test(e);
            }
            e = W(e, "\n");
            for (e = e.split("\n").join(" "); 0 <= e.indexOf("  ");) {
              e = e.split("  ").join(" ");
            }
            B && (e = W(V(e, " "), " "));
            e = e.split("\\u0020").join(" ").split("&#x20;").join(" ").split("&#32;").join(" ");
            m = S(e);
          }
          if ("" !== m) {
            z[y] = m;
          } else {
            return z.splice(y, 1), -1;
          }
        }
        break;
      case 4:
        if (!g) {
          return z.splice(y, 1), -1;
        }
        break;
      case 8:
        if (!n) {
          return z.splice(y, 1), -1;
        }
        break;
      case 15:
        e = z[y - 1];
        if (!x && e && 14 === e[0]) {
          return z.splice(y - 1, 2), -2;
        }
        break;
      case 1:
      case 17:
        v === +v && (v = m, D = 2);
        v = sa(v)[0];
        var q = p[D];
        if (!L(q) && q && "object" === typeof q) {
          z = D - 1;
          y = 0;
          B = sa(p[z]);
          m = B[1];
          var u = B[2];
          B = B[0];
          for (t in q) {
            if (q = 0 === t.indexOf(d)) {
              var t = t.substr(d.length);
              "className" === t && (t = "class");
            }
            ++y;
          }
          p[z] = ta(B, m, u);
          0 === y && p.splice(D, 1);
        }
        if (ra[v]) {
          c(p, k), w = p;
        } else if (qa[v]) {
          p = w = p;
          v = O(p);
          D = p.length;
          for (var l, r, A; v < D; ++v) {
            t = p[v], 3 === T(t) && (e = e || v, l = l || t, r = v, A = t);
          }
          e && (L(l) && (l = l[1]), L(A) && (A = A[1]), e === r ? K(l) && (l = J(l), l = W(V(l, "\n"), "\n"), p[e] = S(l)) : (K(l) && (l = J(l), l = V(l, "\n"), p[e] = S(l)), K(A) && (A = J(A), A = W(A, "\n"), p[r] = S(A))));
        }
    }
  }, function(p, z, y) {
    if (!x) {
      switch(T(p)) {
        case 13:
        case 16:
          if (2 === p.length) {
            return z.splice(y, 1), -1;
          }
      }
    }
    w === p && (w = null);
  }) && wa(a);
}
function wa(a) {
  function b() {
    k.splice(f, 0, S(c));
    c = "";
  }
  var c = "", h, k, f;
  M(a, function(g, n, x, d) {
    if (c && h !== d) {
      return b(), 1;
    }
    if (3 === T(g)) {
      return c = R(g) ? c + g : c + g[1], n.splice(x, 1), h = d, k = n, f = x, -1;
    }
    if (c) {
      return b(), 1;
    }
  });
  c && b();
}
;function Z(a, b, c, h) {
  h = h || {};
  const k = h.argumentBrackets || "()";
  a = xa(a, h.instructionAttrPrefix || ":", k.substr(0, k.length / 2), k.substr(k.length / 2), !!b, c);
  null == h.trimWhitespaces && (h.trimWhitespaces = !0);
  null == h.keepCDATASections && (h.keepCDATASections = !1);
  null == h.keepComments && (h.keepComments = !1);
  null == h.keepEmptyConditionalComment && (h.keepEmptyConditionalComment = !1);
  va(a, h);
  return a;
}
function ya(a, b, c, h) {
  var k = a.indexOf(b);
  c = a.lastIndexOf(c);
  var f = W(V(-1 === k ? a : a.substr(0, k), " "), " ");
  if (-1 !== k) {
    try {
      var g = JSON.parse("[" + a.substring(k + b.length, c) + "]");
    } catch (n) {
      h && h(n);
    }
  }
  return g && g.length ? [f, g] : [f];
}
function xa(a, b, c, h, k, f) {
  b = new za(b, c, h, k, f);
  ja(a, b, !!b.ka);
  return b.ba;
}
function za(a, b, c, h, k) {
  this.ga = a;
  this.ea = b;
  this.da = c;
  this.ia = h;
  this.aa = k;
  this.$ = this.ba = [11];
  this.fa = [this.ba];
  this.ha = !1;
}
za.prototype.ja = function(a) {
  this.aa && this.aa(a);
};
function ma(a, b, c, h) {
  var k = 0, f;
  if (c) {
    for (f in c) {
      var g = da[f] ? 1 : c[f];
      if ("id" === f) {
        var n = g;
        delete c[f];
      } else if ("class" === f) {
        var x = g;
        delete c[f];
      } else {
        if ("style" === f) {
          g = ua(g);
          if (!g) {
            delete c[f];
            continue;
          }
          var d = void 0;
          var w = g, p = [], z = -1;
          for (d in w) {
            g = w[d];
            "0px" === g && (g = 0);
            for (var y = ++z, v, m = [], D = d.split(""), e = D.length; e;) {
              v = D[--e], "A" <= v && "Z" >= v && (v = "-" + v.toLowerCase()), m[e] = v;
            }
            v = m.join("");
            p[y] = v + ":" + g;
          }
          g = p.join(";");
        } else {
          f.startsWith(a.ga) && (d = ya(g, a.ea, a.da, a.aa), d[1] ? (g = [d[0]], g.push.apply(g, d[1])) : g = d[0]);
        }
        c[f] = S(g);
        ++k;
      }
    }
  }
  b = [ta(b, n, x)];
  k && (b[1] = c);
  a.$.push(b);
  h || (b.unshift(17), a.$ = b, a.fa.push(b));
}
function la(a, b, c, h) {
  h ? a.ia && a.$.push([18, b]) : c && a.ia || (b === sa(a.$[1])[0] ? (a.$.shift(), a.fa.pop(), a.$ = a.fa[a.fa.length - 1]) : a.aa && a.aa("End tag error! " + b));
}
function oa(a, b) {
  function c(k, f, g, n) {
    f = k.indexOf(f) + f.length;
    g = n ? k.lastIndexOf(g) : k.indexOf(g, f);
    return k.substring(f, g);
  }
  if (b.startsWith("[if") && 0 < b.indexOf("<![endif]")) {
    var h = xa(c(b, ">", "<![endif]", !0), a.ga, a.ea, a.da, !0, a.aa);
    h.splice(0, 1, 13, c(b, "[", "]", !1));
  } else {
    b.startsWith("{") && 2 < b.indexOf("};") ? (h = xa(b.substring(b.indexOf("};") + 2), a.ga, a.ea, a.da, !0, a.aa), h.splice(0, 1, 16, c(b, "{", "};", !1))) : b.startsWith("[if") && 0 < b.indexOf("><!") ? (h = [14, c(b, "[", "]", !1)], a.ha = !0) : "<![endif]" === b && a.ha ? (h = [15], a.ha = !1) : h = [8, S(J(b))];
  }
  a.$.push(h);
}
function pa(a, b) {
  a.$.push([4, S(J(b))]);
}
function na(a, b) {
  b = ya(b, a.ea, a.da, a.aa);
  var c = [7, b[0]];
  b[1] && c.push.apply(c, b[1]);
  a.$.push(c);
}
;module.exports = Z;
Z.DOCUMENT_NODE = 9;
Z.DOCUMENT_FRAGMENT_NODE = 11;
Z.ELEMENT_NODE = 1;
Z.TEXT_NODE = 3;
Z.CDATA_SECTION = 4;
Z.PROCESSING_INSTRUCTION = 7;
Z.COMMENT_NODE = 8;
Z.COND_CMT_HIDE_LOWER = 13;
Z.COND_CMT_SHOW_LOWER_START = 14;
Z.NETSCAPE4_COND_CMT_HIDE_LOWER = 16;
Z.ELEMENT_START_TAG = 17;
Z.ELEMENT_END_TAG = 18;
Z.gulp = function(a, b) {
  const c = require("plugin-error"), h = require("through2"), k = b || {}, f = k.prettify;
  let g = 0, n = 0, x = 0;
  return h.obj(function(d, w, p) {
    if (d.isNull()) {
      return p();
    }
    if (d.isStream()) {
      return this.emit("error", new c("html2json", "Streaming not supported")), p();
    }
    if (".html" === d.extname || ".htm" === d.extname || ".xhtml" === d.extname || ".php" === d.extname) {
      try {
        const z = d.contents.toString(w), y = performance.now(), v = Z(z, !1, a, k);
        ++g;
        n += z.length;
        x += performance.now() - y;
        d.contents = Buffer.from(JSON.stringify(v, null, f ? "    " : ""));
        d.stem += d.extname;
        d.extname = ".json";
      } catch (z) {
        return this.emit("error", new c("html2json", z)), p();
      }
    }
    p(null, d);
  }, function(d) {
    console.log("[html2json] done!");
    console.log("  Number of files: " + g);
    console.log("  Total file size: " + (n / 100 | 0) / 10 + "KB");
    console.log("  Total Time     : " + (x | 0) + "ms");
    console.log("  Time per file  : " + (x / g * 100 | 0) / 100 + "ms");
    console.log("  Time per size  : " + (x / n * 1E5 | 0) + "ms/100KB");
    d();
  });
};

