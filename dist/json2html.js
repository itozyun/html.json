var aa = {xml:!0, svg:!0, math:!0}, v = {async:!0, autofocus:!0, checked:!0, compact:!0, declare:!0, defer:!0, disabled:!0, draggable:!0, hidden:!0, ismap:!0, loop:!0, multiple:!0, nohref:!0, noresize:!0, noshade:!0, novalidate:!0, nowrap:!0, readonly:!0, required:!0, reversed:!0, scoped:!0, selected:!0}, ea = {AREA:!0, BASE:!0, BASEFONT:!0, BR:!0, BGSOUND:!0, COL:!0, COMMAND:!0, FRAME:!0, HR:!0, IMG:!0, INPUT:!0, ISINDEX:!0, KEYGEN:!0, LINK:!0, META:!0, PARAM:!0, SOURCE:!0, TRACK:!0, EMBED:!0, WBR:!0, 
area:!0, base:!0, basefont:!0, br:!0, bgsound:!0, col:!0, command:!0, frame:!0, hr:!0, img:!0, input:!0, isindex:!0, keygen:!0, link:!0, meta:!0, param:!0, source:!0, track:!0, embed:!0, wbr:!0}, y = {CAPTION:{ARTICLE:!0, SECTION:!0, NAV:!0, ASIDE:!0, H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, 
VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, DD:{ARTICLE:!0, SECTION:!0, NAV:!0, ASIDE:!0, H1:!0, H2:!0, 
H3:!0, H4:!0, H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, TABLE:!0, FORM:!0, LABEL:!0, 
INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, DT:{ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, 
DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, TABLE:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, P:{A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, 
RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, HTML:{HEAD:!0, BODY:!0}, HEAD:{TITLE:!0, BASE:!0, BGSOUND:!0, LINK:!0, META:!0, STYLE:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0}, COLGROUP:{COL:!0}, OPTGROUP:{OPTION:!0}, 
OPTION:{}, TBODY:{TR:!0}, TR:{TH:!0, TD:!0}, RBC:{RB:!0, RP:!0, RT:!0}};
y.LI = y.TD = y.DD;
y.TH = y.DT;
y.RB = y.RP = y.RT = y.P;
y.TFOOT = y.THEAD = y.TBODY;
y.RTC = y.RBC;
function A(a, e, c) {
  var f = a, d = E(f), b = 0, g = e(a, null, -1, b / 3), h = [-1, a, d];
  if (Infinity !== g && -Infinity !== g) {
    if (0 < f.length - d) {
      do {
        var n = ++h[b];
        var l = f[n + d];
        if (void 0 === l) {
          if (h.length = b, b -= 3, f = h[b + 1], d = h[b + 2], c && f) {
            n = h[b] + d;
            g = c(f[n], f, n, b / 3 + 1);
            if (Infinity === g) {
              return;
            }
            -Infinity !== g && (-1 >= g || 1 <= g) && (h[b] += g);
          }
        } else {
          g = e(l, f, n + d, b / 3 + 1);
          if (Infinity === g) {
            return;
          }
          if (-Infinity !== g) {
            if (-1 >= g) {
              h[b] += g;
            } else {
              if (1 <= g && (h[b] += g), E(l) < l.length) {
                b += 3, h[b] = -1, h[b + 1] = f = l, h[b + 2] = d = E(l);
              } else if (c && f) {
                g = c(l, f, n + d, b / 3 + 1);
                if (Infinity === g) {
                  return;
                }
                -Infinity !== g && (-1 >= g || 1 <= g) && (h[b] += g);
              }
            }
          }
        }
      } while (0 <= b);
    }
    c && c(a, null, -1, 0);
  }
}
;var fa = {HTML:!0, HEAD:!0, BODY:!0, P:!0, DT:!0, DD:!0, LI:!0, OPTION:!0, TBODY:!0, THEAD:!0, TFOOT:!0, TD:!0, TH:!0, TR:!0, RB:!0, RBC:!0, RP:!0, RT:!0, RTC:!0, OPTGROUP:!0, CAPTION:!0, COLGROUP:!0}, ha = {A:!0, AUDIO:!0, DEL:!0, INS:!0, MAP:!0, NOSCRIPT:!0, VIDEO:!0}, ia = {H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, ADDRESS:!0, BLOCKQUOTE:!0, DIV:!0, DL:!0, FIELDSET:!0, FORM:!0, HR:!0, LEGEND:!0, MENU:!0, NOSCRIPT:!0, OL:!0, P:!0, PRE:!0, UL:!0, CENTER:!0, DIR:!0, NOFRAMES:!0, MARQUEE:!0}, ja = 
{SCRIPT:!0, STYLE:!0, TEXTAREA:!0, TITLE:!0, PLAINTEXT:!0, XMP:!0, script:!0, style:!0, textarea:!0, title:!0, plaintext:!0, xmp:!0};
function H(a) {
  return !(!a || a.pop !== [].pop);
}
function I(a) {
  return !(!a || "object" !== typeof a);
}
function J(a) {
  return "" + a === a;
}
function M(a) {
  if (J(a) || a === +a) {
    a = 3;
  } else {
    if (H(a)) {
      if (J(a[0])) {
        a = 1;
      } else {
        var e = a[0];
        a = e === +e ? a[0] : -1;
      }
    } else {
      a = -1;
    }
  }
  return a;
}
function ka(a, e, c) {
  var f = e[1];
  e = e.slice(2);
  var d;
  "function" === typeof a ? d = e.length ? a.call(c, f, e) : a.call(c, f) : a[f] && (d = e.length ? a[f].apply(c || a, e) : a[f].call(c || a));
  d && H(d[0]) && d.unshift(11);
  return d;
}
function la(a, e, c) {
  11 === c[0] ? (c.shift(), c.unshift(e, 1), a.splice.apply(a, c)) : a.splice(e, 1, c);
}
function N(a, e, c, f, d) {
  var b;
  if (H(c) && J(c[0])) {
    var g = c[0];
    c = c.slice(1);
    "function" === typeof a ? b = c.length ? a.call(d, g, c) : a.call(d, g) : a[g] && (b = c.length ? a[g].apply(d || a, c) : a[g].call(d || a));
  } else {
    J(c) && ("function" === typeof a ? b = a.call(d, c) : a[c] && (b = a[c].call(d || a)));
  }
  return H(b) ? N(a, e, b, f, d) : b;
}
function ma(a, e, c) {
  a = na(a);
  var f;
  O = a;
  e && (e.h ? e.h.push(a) : e.h = [a]);
  if (H(c)) {
    for (e = 0, f = c.length; e < f; e += 2) {
      var d = c[e];
      var b = c[e + 1];
      if (d === +d) {
        if (d === a.m && !0 === b(a)) {
          break;
        }
      } else if ("*" === d) {
        if (!0 === b(a)) {
          break;
        }
      } else if (J(d) && d === a.D && !0 === b(a)) {
        break;
      }
    }
  } else {
    c(a);
  }
  return a;
}
function P(a) {
  return a.split("&lt;").join("&amp;lt;").split("&gt;").join("&amp;gt;").split("<").join("&lt;").split(">").join("&gt;");
}
function Q(a, e, c) {
  a = P("" + a);
  var f = a.match('"'), d = a.match("'"), b = e ? "'" : '"';
  f && d ? a = e ? b + a.split("'").join("\\'") + b : b + a.split('"').join('\\"') + b : f ? a = "'" + a + "'" : d ? a = e ? b + a.split("'").join("\\'") + b : b + a + b : c || a.match(/[^0-9a-z\.\-]/g) || 72 < a.length ? a = b + a + b : "" === a && (a = b + b);
  return a;
}
function E(a) {
  var e = a[0], c = e === +e ? 2 : 1;
  1 === M(a) || 17 === e ? (a = a[c], c = !H(a) && I(a) ? c + 1 : c) : c = 11 === e ? 1 : 9 === e || 13 === e || 16 === e ? 2 : Infinity;
  return c;
}
function R(a) {
  var e = a.indexOf("#"), c = a.indexOf("."), f = "", d = "";
  e < c ? (f = a.split(".")[1], a = a.split(".")[0], 0 < e && (d = a.split("#")[1], a = a.split("#")[0])) : c < e && (d = a.split("#")[1], a = a.split("#")[0], 0 < c && (f = a.split(".")[1], a = a.split(".")[0]));
  return [a, d, f];
}
function oa(a) {
  var e = [], c = -1, f;
  for (f in a) {
    var d = a[f];
    "0px" === d && (d = 0);
    for (var b = ++c, g, h = [], n = f.split(""), l = n.length; l;) {
      g = n[--l], "A" <= g && "Z" >= g && (g = "-" + g.toLowerCase()), h[l] = g;
    }
    e[b] = h.join("") + ":" + P("" + d);
  }
  return e.join(";").substr(1);
}
function na(a) {
  var e, c;
  A(a, function(f, d, b, g) {
    function h(u, m, p) {
      if (e) {
        g < c.length && (c.length = g);
        var q = c[c.length - 1];
        T <= U(q) ? (q.v = q.v || [], q.v.push([u, m, p]), u = null) : u = new V(q, q.h && q.h.length, u, m);
        E(f) < f.length && (c[g] = u);
      } else {
        e = new V(!0, 0, u, m), c = [e];
      }
    }
    if (J(f) || f === +f) {
      h(3, f);
    } else {
      d = f[0];
      b = f[1];
      var n = 1, l = d, r;
      switch(d) {
        case 9:
        case 13:
        case 16:
          h(d, b);
          break;
        case 11:
          h(d);
          break;
        case 3:
        case 4:
        case 8:
        case 14:
        case 18:
          h(d, b);
          break;
        case 15:
          h(d);
          break;
        case 7:
          n = [];
          l = 2;
          for (r = f.length; l < r; ++l) {
            n[l - 2] = f[l];
          }
          h(d, b, r - 2 ? n : null);
          break;
        case 1:
        case 17:
          l = b, n = 2;
        default:
          J(l) && h(1 === n ? 1 : d, l, f[n]);
      }
    }
    return Infinity;
  });
  return e;
}
;function V(a, e, c, f) {
  if (a === !!a) {
    var d = null;
    this.l = a;
  } else {
    d = a, this.l = d.l;
  }
  this.j = d;
  this.m = c;
  d && (d.h || (d.h = []), a = d.h, 0 <= e && e < a.length ? a.splice(e, 0, this) : a.push(this));
  switch(c) {
    case 1:
    case 17:
      e = R(f), f = e[0];
    case 18:
      this.D = f;
  }
}
var O = null;
function U(a) {
  return a.l ? O === a ? a.C ? pa : a.F ? T : qa : O.j === a ? ra : sa : ta;
}
V.prototype.remove = function() {
  if (T <= U(this)) {
    return this.C = !0, null;
  }
  var a = this.j ? this.j.h.indexOf(this) : -1;
  0 <= a && (this.j.h.splice(a, 1), this.j = null);
};
V.prototype.wrap = function(a, e, c) {
  if (this.l) {
    this.o = this.o || [], this.o.push([a, e, c]), a = null;
  } else {
    if (this.j) {
      var f = (c = this.j) ? this.j.h.indexOf(this) : -1;
      a = new V(c, f, a, e);
    } else {
      a = null;
    }
  }
  W(a, 0, [this]);
  return a;
};
function W(a, e, c) {
  var f = a.h = a.h || [], d = f.length, b = c.length;
  for (e = e < d ? e : d; b;) {
    d = c[--b], 11 === d.m ? d.h && d.h.length && W(a, e, d.h) : (d.remove(), f.splice(e, 0, d), d.j = a);
  }
}
var ta = 0, sa = 1, qa = 2, T = 3, pa = 4, ra = 5;
var X = !1, Y = !1, ua = !1;
function Z(a, e, c, f, d) {
  9 !== a[0] && 11 !== a[0] && (a = [11, a]);
  var b = [], g = -1;
  va({h:function(h) {
    b[++g] = h;
  }}, function(h, n) {
    A(a, h, n);
  }, e, c, f, d);
  return b.join("");
}
function va(a, e, c, f, d, b) {
  function g() {
    var m = "";
    u && (m = "</" + u.toLowerCase() + ">", u = "");
    return m;
  }
  b = b || {};
  var h = !0 === b.quotAlways, n = !0 === b.useSingleQuot, l = b.instructionAttrPrefix || ":", r = [ua, null, X || !1, Y || !1, !1];
  ua = X = Y = !1;
  var u;
  e(function(m, p, q, w, F, G) {
    function K(ba) {
      k[++t] = g() + (L ? ba : P("" + ba));
    }
    var k = [], t = -1;
    F = !1;
    H(m) && (F = E(m) < m.length);
    var D = r[5 * w], S = r[5 * w + 1], ca = r[5 * w + 2], L = r[5 * w + 3];
    S = f ? ma(m, S, f) : null;
    var x = m[0], B = m[1], da = 1, z;
    switch(M(m)) {
      case 9:
        k[++t] = B;
        break;
      case 3:
        H(m) || (B = m);
        K(B);
        break;
      case 4:
        k[++t] = "<![CDATA[" + P("" + B) + "]]\x3e";
        break;
      case 8:
        k[++t] = "\x3c!--" + P("" + B) + "--\x3e";
        break;
      case 13:
        k[++t] = g() + "\x3c!--[" + B + "]>";
        break;
      case 16:
        k[++t] = g() + "\x3c!--{" + B + "};";
        break;
      case 14:
        k[++t] = "\x3c!--[" + B + "]>\x3c!--\x3e";
        break;
      case 15:
        k[++t] = "\x3c!--<![endif]--\x3e";
        break;
      case 7:
        if (c) {
          var C = ka(c, m, G);
          G = H(C);
          if (null != C && "" !== C) {
            if (J(C) || C === +C) {
              K(C);
            } else if (G) {
              return la(p, q, C), -1;
            }
          }
        }
        break;
      case 18:
        k[++t] = "</" + B + ">";
        break;
      case 17:
        C = !0;
      case 1:
        x === +x && (x = B, da = 2);
        x = R(x);
        p = x[1];
        q = x[2];
        x = x[0];
        m = m[da];
        "P" !== u || ia[x] ? u = "" : k[++t] = g();
        D = D || (D || aa[x] ? !0 : 0 < x.indexOf(":"));
        ca = !!ha[x];
        L = L || !!ja[x];
        k[++t] = "<" + (D ? x : x.toLowerCase());
        p && (k[++t] = " id=" + Q(p, n, D || h));
        q && (k[++t] = " class=" + Q(q, n, D || h));
        if (!H(m) && I(m)) {
          for (z in m) {
            if (p = m[z], (q = 0 === z.indexOf(l)) && (z = z.substr(l.length)), "className" === z && (z = "class"), q && c && (p = N(c, z, p, d, G)), !(null == p || v[z] && !1 === p || (k[++t] = " " + z, v[z] || !0 === p))) {
              if ("style" === z && I(p) && (p = oa(p), !p)) {
                continue;
              }
              k[++t] = "=" + Q(p, n, D || h);
            }
          }
        }
        !D || F || C ? k[++t] = ">" : k[++t] = " />";
    }
    r[5 * w + 5] = D;
    r[5 * w + 6] = S;
    r[5 * w + 7] = ca;
    r[5 * w + 8] = L;
    r[5 * w + 9] = F;
    -1 !== t && a.h(k.join(""));
  }, function(m, p, q, w) {
    p = [];
    q = -1;
    var F = r[5 * w + 5], G = r[5 * w + 7], K = r[5 * w + 9], k = m[0];
    5 * w + 5 < r.length && (r.length = 5 * w + 5);
    switch(M(m)) {
      case 13:
        p[++q] = g() + "<![endif]--\x3e";
        break;
      case 16:
        p[++q] = g() + "--\x3e";
        break;
      case 17:
        u = "";
        break;
      case 1:
        k === +k && (k = m[1]), k = R(k), k = k[0], !K && ea[k] ? u = "" : F && !K || fa[k] && (!G || "P" !== k) ? u = k : (p[++q] = "</" + (F ? k : k.toLowerCase()) + ">", u = "");
    }
    -1 !== q && a.h(p.join(""));
    0 === w && (a = null);
  });
  e = null;
}
;module.exports = Z;
Z.DOCUMENT_NODE = 9;
Z.DOCUMENT_FRAGMENT_NODE = 11;
Z.ELEMENT_NODE = 1;
Z.TEXT_NODE = 3;
Z.CDATA_SECTION = 4;
Z.PROCESSING_INSTRUCTION = 7;
Z.COMMENT_NODE = 8;
Z.COND_CMT_HIDE_LOWER = 13;
Z.COND_CMT_SHOW_LOWER_START = 14;
Z.COND_CMT_SHOW_LOWER_END = 15;
Z.NETSCAPE4_COND_CMT_HIDE_LOWER = 16;
Z.ELEMENT_START_TAG = 17;
Z.ELEMENT_END_TAG = 18;
Z.gulp = function(a, e, c, f) {
  const d = require("plugin-error");
  return require("through2").obj(function(b, g, h) {
    if (b.isNull()) {
      return h();
    }
    if (b.isStream()) {
      return this.emit("error", new d("json2html", "Streaming not supported")), h();
    }
    const n = "." + b.stem.split(".").pop();
    if (".json" === b.extname && [".html", ".htm", ".xhtml", ".php"].indexOf(n)) {
      try {
        const l = JSON.parse(b.contents.toString(g));
        if (H(l)) {
          const r = Z(l, a, e, c, f);
          b.stem = b.stem.substr(0, b.stem.length - n.length);
          b.extname = n;
          b.contents = Buffer.from(r);
        }
      } catch (l) {
        this.emit("error", new d("json2html", l));
      }
    }
    h(null, b);
  });
};

