var aa = {xml:!0, svg:!0, math:!0}, ba = {async:!0, autofocus:!0, checked:!0, compact:!0, declare:!0, defer:!0, disabled:!0, draggable:!0, hidden:!0, ismap:!0, loop:!0, multiple:!0, nohref:!0, noresize:!0, noshade:!0, novalidate:!0, nowrap:!0, readonly:!0, required:!0, reversed:!0, scoped:!0, selected:!0}, ca = {AREA:!0, BASE:!0, BASEFONT:!0, BR:!0, BGSOUND:!0, COL:!0, COMMAND:!0, FRAME:!0, HR:!0, IMG:!0, INPUT:!0, ISINDEX:!0, KEYGEN:!0, LINK:!0, META:!0, PARAM:!0, SOURCE:!0, TRACK:!0, EMBED:!0, 
WBR:!0, area:!0, base:!0, basefont:!0, br:!0, bgsound:!0, col:!0, command:!0, frame:!0, hr:!0, img:!0, input:!0, isindex:!0, keygen:!0, link:!0, meta:!0, param:!0, source:!0, track:!0, embed:!0, wbr:!0}, x = {CAPTION:{ARTICLE:!0, SECTION:!0, NAV:!0, ASIDE:!0, H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, 
CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, DD:{ARTICLE:!0, SECTION:!0, NAV:!0, ASIDE:!0, 
H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, TABLE:!0, FORM:!0, 
LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, DT:{ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, 
INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, TABLE:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, P:{A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, 
RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, HTML:{HEAD:!0, BODY:!0}, HEAD:{TITLE:!0, BASE:!0, BGSOUND:!0, LINK:!0, META:!0, STYLE:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0}, COLGROUP:{COL:!0}, OPTGROUP:{OPTION:!0}, 
OPTION:{}, TBODY:{TR:!0}, TR:{TH:!0, TD:!0}, RBC:{RB:!0, RP:!0, RT:!0}};
x.LI = x.TD = x.DD;
x.TH = x.DT;
x.RB = x.RP = x.RT = x.P;
x.TFOOT = x.THEAD = x.TBODY;
x.RTC = x.RBC;
function da(a, e, d) {
  var f = a, c = A(f), b = 0, g = e(a, null, -1, b / 3), k = [-1, a, c], m = !1;
  if (Infinity === g || -Infinity === g) {
    return !1;
  }
  if (0 < f.length - c) {
    do {
      var n = ++k[b];
      var B = f[n + c];
      if (void 0 === B) {
        if (k.length = b, b -= 3, f = k[b + 1], c = k[b + 2], d && f) {
          n = k[b] + c;
          g = d(f[n], f, n, b / 3 + 1);
          if (Infinity === g) {
            return m;
          }
          -Infinity !== g && (-1 >= g || 1 <= g) && (k[b] += g, m = !0);
        }
      } else {
        g = e(B, f, n + c, b / 3 + 1);
        if (Infinity === g) {
          return m;
        }
        if (-Infinity !== g) {
          if (-1 >= g) {
            k[b] += g, m = !0;
          } else {
            if (1 <= g && (k[b] += g, m = !0), g = A(B), 0 < B.length - g) {
              b += 3, k[b] = -1, k[b + 1] = f = B, k[b + 2] = c = g;
            } else if (d && f) {
              g = d(B, f, n + c, b / 3 + 1);
              if (Infinity === g) {
                return m;
              }
              -Infinity !== g && (-1 >= g || 1 <= g) && (k[b] += g, m = !0);
            }
          }
        }
      }
    } while (0 <= b);
  }
  d && d(a, null, -1, 0);
  return m;
}
;var ea = {HTML:!0, HEAD:!0, BODY:!0, P:!0, DT:!0, DD:!0, LI:!0, OPTION:!0, TBODY:!0, THEAD:!0, TFOOT:!0, TD:!0, TH:!0, TR:!0, RB:!0, RBC:!0, RP:!0, RT:!0, RTC:!0, OPTGROUP:!0, CAPTION:!0, COLGROUP:!0}, ja = {A:!0, AUDIO:!0, DEL:!0, INS:!0, MAP:!0, NOSCRIPT:!0, VIDEO:!0}, ka = {H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, ADDRESS:!0, BLOCKQUOTE:!0, DIV:!0, DL:!0, FIELDSET:!0, FORM:!0, HR:!0, LEGEND:!0, MENU:!0, NOSCRIPT:!0, OL:!0, P:!0, PRE:!0, UL:!0, CENTER:!0, DIR:!0, NOFRAMES:!0, MARQUEE:!0}, la = 
{SCRIPT:!0, STYLE:!0, TEXTAREA:!0, TITLE:!0, PLAINTEXT:!0, XMP:!0, script:!0, style:!0, textarea:!0, title:!0, plaintext:!0, xmp:!0};
function C(a) {
  return !(!a || a.pop !== [].pop);
}
function G(a) {
  return !(!a || "object" !== typeof a);
}
function N(a) {
  return "" + a === a;
}
function O(a) {
  if (N(a) || a === +a) {
    a = 3;
  } else {
    if (C(a)) {
      if (N(a[0])) {
        a = 1;
      } else {
        var e = a[0];
        a = e === +e ? a[0] : -1;
      }
    } else {
      a = -1;
    }
  }
  return a;
}
function ma(a, e, d, f, c) {
  var b;
  if (C(d) && N(d[0])) {
    var g = d[0];
    d = d.slice(1);
    "function" === typeof a ? b = d.length ? a.call(c, g, d) : a.call(c, g) : a[g] && (b = d.length ? a[g].apply(c || a, d) : a[g].call(c || a));
  } else {
    N(d) && ("function" === typeof a ? b = a.call(c, d) : a[d] && (b = a[d].call(c || a)));
  }
  return C(b) ? ma(a, e, b, f, c) : b;
}
function Q(a) {
  return a.split("&lt;").join("&amp;lt;").split("&gt;").join("&amp;gt;").split("<").join("&lt;").split(">").join("&gt;");
}
function T(a, e, d) {
  a = Q("" + a);
  var f = a.match('"'), c = a.match("'"), b = e ? "'" : '"';
  f && c ? a = e ? b + a.split("'").join("\\'") + b : b + a.split('"').join('\\"') + b : f ? a = "'" + a + "'" : c ? a = e ? b + a.split("'").join("\\'") + b : b + a + b : d || a.match(/[^0-9a-z\.\-]/g) || 72 < a.length ? a = b + a + b : "" === a && (a = b + b);
  return a;
}
function A(a) {
  var e = a[0];
  return 1 === O(a) ? (e = e === +e ? 2 : 1, a = a[e], !C(a) && G(a) ? e + 1 : e) : 11 === e ? 1 : 9 === e || 13 === e || 16 === e ? 2 : Infinity;
}
function U(a) {
  var e = a.indexOf("#"), d = a.indexOf("."), f = "", c = "";
  e < d ? (f = a.split(".")[1], a = a.split(".")[0], 0 < e && (c = a.split("#")[1], a = a.split("#")[0])) : d < e && (c = a.split("#")[1], a = a.split("#")[0], 0 < d && (f = a.split(".")[1], a = a.split(".")[0]));
  return [a, c, f];
}
function na(a) {
  var e, d;
  da(a, function(f, c, b, g) {
    function k(F, J, R) {
      if (e) {
        g < d.length && (d.length = g);
        var t = d[d.length - 1];
        V <= oa(t) ? (t.v = t.v || [], t.v.push([F, J, R]), F = null) : F = new W(t, t.h && t.h.length, F, J);
        C(f) && A(f) < f.length && (d[g] = F);
      } else {
        e = new W(!0, 0, F, J), d = [e];
      }
    }
    if (N(f) || f === +f) {
      k(3, f);
    } else {
      c = f[0];
      b = f[1];
      var m = 1, n = c, B;
      switch(c) {
        case 9:
        case 13:
        case 16:
          k(c, b);
          break;
        case 11:
          k(c);
          break;
        case 3:
        case 4:
        case 8:
        case 14:
        case 18:
          k(c, b);
          break;
        case 15:
          k(c);
          break;
        case 7:
          m = [];
          n = 2;
          for (B = f.length; n < B; ++n) {
            m[n - 2] = f[n];
          }
          k(c, b, B - 2 ? m : null);
          break;
        case 1:
        case 17:
          n = b, m = 2;
        default:
          N(n) && k(1 === m ? 1 : c, n, f[m]);
      }
    }
    return Infinity;
  });
  return e;
}
;function W(a, e, d, f) {
  if (a === !!a) {
    var c = null;
    this.l = a;
  } else {
    c = a, this.l = c.l;
  }
  this.j = c;
  this.m = d;
  c && (c.h || (c.h = []), a = c.h, 0 <= e && e < a.length ? a.splice(e, 0, this) : a.push(this));
  switch(d) {
    case 1:
    case 17:
      e = U(f), f = e[0];
    case 18:
      this.D = f;
  }
}
var X = null;
function oa(a) {
  return a.l ? X === a ? a.F ? pa : a.G ? V : qa : X.j === a ? ra : sa : ta;
}
W.prototype.remove = function() {
  if (V <= oa(this)) {
    return this.F = !0, null;
  }
  var a = this.j ? this.j.h.indexOf(this) : -1;
  0 <= a && (this.j.h.splice(a, 1), this.j = null);
};
W.prototype.wrap = function(a, e, d) {
  if (this.l) {
    this.o = this.o || [], this.o.push([a, e, d]), a = null;
  } else {
    if (this.j) {
      var f = (d = this.j) ? this.j.h.indexOf(this) : -1;
      a = new W(d, f, a, e);
    } else {
      a = null;
    }
  }
  ua(a, 0, [this]);
  return a;
};
function ua(a, e, d) {
  var f = a.h = a.h || [], c = f.length, b = d.length;
  for (e = e < c ? e : c; b;) {
    c = d[--b], 11 === c.m ? c.h && c.h.length && ua(a, e, c.h) : (c.remove(), f.splice(e, 0, c), c.j = a);
  }
}
var ta = 0, sa = 1, qa = 2, V = 3, pa = 4, ra = 5;
function Y(a, e, d, f, c) {
  9 !== a[0] && 11 !== a[0] && (a = [11, a]);
  var b = [], g = -1;
  va({C:function(k) {
    b[++g] = k;
  }}, a, e, d, f, c);
  return b.join("");
}
function va(a, e, d, f, c, b) {
  function g() {
    var q = "";
    H && (q = "</" + H.toLowerCase() + ">", H = "");
    return q;
  }
  var k = da, m = d || null, n = f || null, B = "function" === typeof c ? c : function() {
  };
  d = b || {};
  var F = !0 === d.quotAlways, J = !0 === d.useSingleQuot, R = d.instructionAttrPrefix || ":", t = [!1, null, !1, !1, !1], H;
  k(e, function(q, w, y, z) {
    var v = [], l = -1, K = !1;
    C(q) && (K = 0 < q.length - A(q));
    var r = t[5 * z], h = t[5 * z + 1], fa = t[5 * z + 2], S = t[5 * z + 3];
    if (n) {
      var D = na(q);
      var I;
      X = D;
      h && (h.h ? h.h.push(D) : h.h = [D]);
      if (C(n)) {
        for (h = 0, I = n.length; h < I; h += 2) {
          var u = n[h];
          var P = n[h + 1];
          if (u === +u) {
            if (u === D.m && !0 === P(D)) {
              break;
            }
          } else if ("*" === u) {
            if (!0 === P(D)) {
              break;
            }
          } else if (N(u) && u === D.D && !0 === P(D)) {
            break;
          }
        }
      } else {
        n(D);
      }
    } else {
      D = null;
    }
    h = q[0];
    u = q[1];
    I = 1;
    switch(O(q)) {
      case 9:
        v[++l] = u;
        break;
      case 3:
        C(q) || (u = q);
        v[++l] = g() + (S ? u : Q("" + u));
        break;
      case 4:
        v[++l] = "<![CDATA[" + Q("" + u) + "]]\x3e";
        break;
      case 8:
        v[++l] = "\x3c!--" + Q("" + u) + "--\x3e";
        break;
      case 13:
        v[++l] = g() + "\x3c!--[" + u + "]>";
        break;
      case 16:
        v[++l] = g() + "\x3c!--{" + u + "};";
        break;
      case 14:
        v[++l] = "\x3c!--[" + u + "]>\x3c!--\x3e";
        break;
      case 15:
        v[++l] = "\x3c!--<![endif]--\x3e";
        break;
      case 7:
        if (m) {
          l = q[1];
          var L = q.slice(2);
          var p;
          "function" === typeof m ? p = L.length ? m(l, L) : m(l) : m[l] && (p = L.length ? m[l].apply(null, L) : m[l]());
          void 0 !== p && null !== p && "" !== p && (N(p) || p === +p ? w.splice(y, 1, p) : C(p) && (11 === p[0] ? (p.shift(), p.unshift(y, 1), w.splice.apply(w, p)) : C(p[0]) ? (p.unshift(y, 1), w.splice.apply(w, p)) : w.splice(y, 1, p)));
          l = p;
          if (void 0 !== l && null !== l && "" !== l && (N(l) || l === +l || C(l))) {
            return -1;
          }
        }
        break;
      case 18:
        v[++l] = "</" + u + ">";
        break;
      case 17:
        L = !0;
      case 1:
        h === +h && (h = u, I = 2);
        h = U(h);
        w = h[1];
        y = h[2];
        h = h[0];
        q = q[I];
        "P" !== H || ka[h] ? H = "" : v[++l] = g();
        r = r || (r || aa[h] ? !0 : 0 < h.indexOf(":"));
        fa = !!ja[h];
        S = S || !!la[h];
        v[++l] = "<" + (r ? h : h.toLowerCase());
        w && (v[++l] = " id=" + T(w, J, r || F));
        y && (v[++l] = " class=" + T(y, J, r || F));
        if (!C(q) && G(q)) {
          w = ++l;
          y = "";
          for (var E in q) {
            if (h = q[E], (p = 0 === E.indexOf(R)) && (E = E.substr(R.length)), "className" === E && (E = "class"), p && m && (h = ma(m, E, h, B)), !(null == h || ba[E] && !1 === h || (y += " " + E, ba[E] || !0 === h))) {
              if ("style" === E && G(h)) {
                p = void 0;
                I = h;
                u = [];
                P = -1;
                for (p in I) {
                  h = I[p];
                  "0px" === h && (h = 0);
                  for (var wa = ++P, M, ha = [], ia = p.split(""), Z = ia.length; Z;) {
                    M = ia[--Z], "A" <= M && "Z" >= M && (M = "-" + M.toLowerCase()), ha[Z] = M;
                  }
                  u[wa] = ha.join("") + ":" + Q("" + h);
                }
                h = u.join(";").substr(1);
                if (!h) {
                  continue;
                }
              }
              y += "=" + T(h, J, r || F);
            }
          }
          v[w] = y;
        }
        !r || K || L ? v[++l] = ">" : v[++l] = " />";
    }
    t[5 * z + 5] = r;
    t[5 * z + 6] = D;
    t[5 * z + 7] = fa;
    t[5 * z + 8] = S;
    t[5 * z + 9] = K;
    a.C(v.join(""));
  }, function(q, w, y, z) {
    w = [];
    y = -1;
    var v = t[5 * z + 5], l = t[5 * z + 7], K = t[5 * z + 9], r = q[0];
    5 * z + 5 < t.length && (t.length = 5 * z + 5);
    switch(O(q)) {
      case 13:
        w[++y] = g() + "<![endif]--\x3e";
        break;
      case 16:
        w[++y] = g() + "--\x3e";
        break;
      case 17:
        H = "";
        break;
      case 1:
        r === +r && (r = q[1]), r = U(r), r = r[0], !K && ca[r] ? H = "" : v && !K || ea[r] && (!l || "P" !== r) ? H = r : (w[++y] = "</" + (v ? r : r.toLowerCase()) + ">", H = "");
    }
    a.C(w.join(""));
  });
  k = null;
}
;module.exports = Y;
Y.DOCUMENT_NODE = 9;
Y.DOCUMENT_FRAGMENT_NODE = 11;
Y.ELEMENT_NODE = 1;
Y.TEXT_NODE = 3;
Y.CDATA_SECTION = 4;
Y.PROCESSING_INSTRUCTION = 7;
Y.COMMENT_NODE = 8;
Y.COND_CMT_HIDE_LOWER = 13;
Y.COND_CMT_SHOW_LOWER_START = 14;
Y.COND_CMT_SHOW_LOWER_END = 15;
Y.NETSCAPE4_COND_CMT_HIDE_LOWER = 16;
Y.ELEMENT_START_TAG = 17;
Y.ELEMENT_END_TAG = 18;
Y.gulp = function(a, e, d, f) {
  const c = require("plugin-error");
  return require("through2").obj(function(b, g, k) {
    if (b.isNull()) {
      return k();
    }
    if (b.isStream()) {
      return this.emit("error", new c("json2html", "Streaming not supported")), k();
    }
    const m = "." + b.stem.split(".").pop();
    if (".json" === b.extname && [".html", ".htm", ".xhtml", ".php"].indexOf(m)) {
      try {
        const n = JSON.parse(b.contents.toString(g));
        if (C(n)) {
          const B = Y(n, a, e, d, f);
          b.stem = b.stem.substr(0, b.stem.length - m.length);
          b.extname = m;
          b.contents = Buffer.from(B);
        }
      } catch (n) {
        this.emit("error", new c("json2html", n));
      }
    }
    k(null, b);
  });
};

