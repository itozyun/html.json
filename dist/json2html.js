var r = {xml:!0, svg:!0, math:!0}, w = {checked:!0, compact:!0, declare:!0, defer:!0, disabled:!0, ismap:!0, multiple:!0, nohref:!0, noresize:!0, noshade:!0, nowrap:!0, readonly:!0, selected:!0}, y = {AREA:!0, BASE:!0, BASEFONT:!0, BR:!0, BGSOUND:!0, COL:!0, COMMAND:!0, FRAME:!0, HR:!0, IMG:!0, INPUT:!0, ISINDEX:!0, KEYGEN:!0, LINK:!0, META:!0, PARAM:!0, SOURCE:!0, TRACK:!0, EMBED:!0, WBR:!0, area:!0, base:!0, basefont:!0, br:!0, bgsound:!0, col:!0, command:!0, frame:!0, hr:!0, img:!0, input:!0, 
isindex:!0, keygen:!0, link:!0, meta:!0, param:!0, source:!0, track:!0, embed:!0, wbr:!0}, C = {CAPTION:{ARTICLE:!0, SECTION:!0, NAV:!0, ASIDE:!0, H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, 
WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, DD:{ARTICLE:!0, SECTION:!0, NAV:!0, ASIDE:!0, H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, 
UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, TABLE:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, 
FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, DT:{ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, 
svg:!0, TABLE:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, P:{A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, 
OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, HTML:{HEAD:!0, BODY:!0}, HEAD:{TITLE:!0, BASE:!0, BGSOUND:!0, LINK:!0, META:!0, STYLE:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLETE:!0}, COLGROUP:{COL:!0}, OPTGROUP:{OPTION:!0}, OPTION:{}, TBODY:{TR:!0}, TR:{TH:!0, TD:!0}, RBC:{RB:!0, RP:!0, RT:!0}};
C.LI = C.TD = C.DD;
C.TH = C.DT;
C.RB = C.RP = C.RT = C.P;
C.TFOOT = C.THEAD = C.TBODY;
C.RTC = C.RBC;
var K = {HTML:!0, HEAD:!0, BODY:!0, P:!0, DT:!0, DD:!0, LI:!0, OPTION:!0, TBODY:!0, THEAD:!0, TFOOT:!0, TD:!0, TH:!0, TR:!0, RB:!0, RBC:!0, RP:!0, RT:!0, RTC:!0, OPTGROUP:!0, CAPTION:!0, COLGROUP:!0}, L = {A:!0, AUDIO:!0, DEL:!0, INS:!0, MAP:!0, NOSCRIPT:!0, VIDEO:!0}, M = {H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, ADDRESS:!0, BLOCKQUOTE:!0, DIV:!0, DL:!0, FIELDSET:!0, FORM:!0, HR:!0, LEGEND:!0, MENU:!0, NOSCRIPT:!0, OL:!0, P:!0, PRE:!0, UL:!0, CENTER:!0, DIR:!0, NOFRAMES:!0, MARQUEE:!0}, N = {SCRIPT:!0, 
STYLE:!0, TEXTAREA:!0, TITLE:!0, PLAINTEXT:!0, XMP:!0, script:!0, style:!0, textarea:!0, title:!0, plaintext:!0, xmp:!0};
function O(a) {
  return !(!a || a.pop !== [].pop);
}
function P(a) {
  return !(!a || "object" !== typeof a);
}
function Q(a) {
  return "" + a === a;
}
function U(a) {
  if (Q(a) || a === +a) {
    a = 3;
  } else {
    if (O(a)) {
      if (Q(a[0])) {
        a = 1;
      } else {
        var b = a[0];
        a = b === +b ? a[0] : -1;
      }
    } else {
      a = -1;
    }
  }
  return a;
}
function aa(a, b, c, h) {
  var g = b[1], d = b.slice(2), e;
  "function" === typeof a ? e = d.length ? a(g, d) : a(g) : e = d.length ? a[g](d) : a[g]();
  void 0 !== e && null !== e && "" !== e && (Q(e) || e === +e ? c ? c.splice(h, 1, e) : (b.length = 0, b.push(3, b)) : O(e) && (11 === e[0] ? c ? (e.shift(), e.unshift(h, 1), c.splice.apply(c, e)) : (b.length = 0, b.push.apply(b, e)) : O(e[0]) ? c ? (e.unshift(h, 1), c.splice.apply(c, e)) : (b.length = 0, b.push(11), b.push.apply(b, e)) : c ? c.splice(h, 1, e) : (b.length = 0, b.push(11, e))));
  return e;
}
function V(a, b, c, h) {
  var g;
  if (O(c) && Q(c[0])) {
    var d = c[0];
    c = c.slice(1);
    "function" === typeof a ? g = c.length ? a(d, c) : a(d) : g = c.length ? a[d](c) : a[d]();
  } else {
    Q(c) && ("function" === typeof a ? g = a(c) : g = a[c]());
  }
  return O(g) ? V(a, b, g, h) : g;
}
function ba(a, b, c) {
  a = ca(a);
  var h;
  b && (b.h ? b.h.push(a) : b.h = [a]);
  if (O(c)) {
    var g = 1 === a.m || 17 === a.m;
    b = 0;
    for (h = c.length; b < h; b += 2) {
      var d = c[b];
      var e = c[b + 1];
      if (d === +d) {
        if (d === a.m && !0 === e(a)) {
          break;
        }
      } else if (g && Q(d) && d === a.v && !0 === e(a)) {
        break;
      }
    }
  } else {
    c(a);
  }
  return a;
}
function W(a) {
  return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;");
}
function X(a, b, c) {
  a = W("" + a);
  var h = a.match('"'), g = a.match("'"), d = b ? "'" : '"';
  if (h && g) {
    a = b ? d + a.split("'").join("\\'") + d : d + a.split('"').join('\\"') + d;
  } else if (h) {
    a = "'" + a + "'";
  } else if (g) {
    a = b ? d + a.split("'").join("\\'") + d : d + a + d;
  } else if (c || a.match(/[^0-9a-z\.\-]/g) || 72 < a.length) {
    a = d + a + d;
  }
  return a;
}
function da(a) {
  var b = a.indexOf("#"), c = a.indexOf("."), h = "", g = "";
  b < c ? (h = a.split(".")[1], a = a.split(".")[0], 0 < b && (g = a.split("#")[1], a = a.split("#")[0])) : c < b && (g = a.split("#")[1], a = a.split("#")[0], 0 < c && (h = a.split(".")[1], a = a.split(".")[0]));
  return [a, g, h];
}
function ca(a) {
  return function(b, c) {
    function h(u, D, I) {
      if (g) {
        var A = g;
        A.j ? (A.o = A.o || [], A.o.push([u, D, I]), u = null) : u = new Y(A, A.h && A.h.length, u, D);
      } else {
        u = new Y(!0, 0, u, D);
      }
      return u;
    }
    var g = c === !!c ? null : c;
    c = b[0];
    var d = b[1], e = 1, z = c;
    switch(c) {
      case 3:
      case 4:
      case 8:
      case 14:
      case 18:
        return h(c, d);
      case 15:
        return h(c);
      case 7:
        var v = [];
        e = 2;
        for (z = b.length; e < z; ++e) {
          v[e - 2] = b[e];
        }
        return h(c, d, z ? v : null);
      case 9:
      case 13:
      case 16:
        v = h(c, d);
        break;
      case 11:
        v = h(c);
        break;
      case 1:
      case 17:
        z = d, e = 2;
      default:
        Q(z) && (v = h(1 === e ? 1 : c, z, b[e]));
    }
    return v;
  }(a, !0);
}
;function Y(a, b, c, h) {
  if (a === !!a) {
    var g = null;
    this.j = a;
  } else {
    g = a, this.j = g.j;
  }
  this.l = g;
  this.m = c;
  g && (g.h || (g.h = []), a = g.h, 0 <= b && b < a.length ? a.splice(b, 0, this) : a.push(this));
  switch(c) {
    case 1:
    case 17:
    case 18:
      this.v = h;
  }
}
Y.prototype.remove = function() {
  if (this.j) {
    return null;
  }
  var a = this.l ? this.l.h.indexOf(this) : -1;
  0 <= a && (this.l.h.splice(a, 1), this.l = null);
};
function Z(a, b, c, h, g) {
  function d(l, B, f, x, k, m) {
    function p() {
      var R = "";
      G && (R = "</" + G + ">", G = "");
      return R;
    }
    var q = u ? ba(l, f, u) : null;
    f = "";
    var J = l[0], t = l[1], E = 1, n = J, H;
    switch(J) {
      case 9:
        f = t + e(l, q, !1, m);
        break;
      case 11:
        f = e(l, q, k, m);
        break;
      case 3:
        f = p() + (m ? t : W("" + t));
        break;
      case 4:
        f = "<![CDATA[" + t + "]]\x3e";
        break;
      case 8:
        f = "\x3c!--" + t + "--\x3e";
        break;
      case 13:
        f = p() + "\x3c!--[" + t + "]>" + e(l, q, !0, m) + "<![endif]--\x3e";
        break;
      case 16:
        f = p() + "\x3c!--{" + t + "};" + e(l, q, !0, m) + "--\x3e";
        break;
      case 14:
        f = "\x3c!--[" + t + "]>\x3c!--\x3e";
        break;
      case 15:
        f = "\x3c!--<![endif]--\x3e";
        break;
      case 7:
        if (v) {
          if (k = aa(v, l, B, x), void 0 !== k && null !== k && "" !== k && (Q(k) || k === +k || O(k))) {
            return -1;
          }
        } else {
          D("onInstruction is void!");
        }
        break;
      case 18:
        f = "</" + t + ">";
        break;
      case 17:
        var S = !0;
      case 1:
        n = l[1], E = 2;
      default:
        n = da(n), B = n[1], x = n[2], n = n[0], E = l[E], "P" !== G || M[n] ? G = "" : f = p(), f += "<" + n, B && (f += " id=" + X(B, A, F || I)), x && (f += " class=" + X(x, A, F || I)), F || (H = F = F || r[n] ? !0 : 0 < n.indexOf(":")), !O(E) && P(E) && (f += z(E)), f = (l = e(l, q, L[n], m || N[n])) ? f + (">" + l) : S ? f + ">" : f + (F ? " />" : ">"), S ? G = "" : F && !l || K[n] && (!k || "P" !== n) ? G = y[n] ? "" : n : (f += "</" + n + ">", G = ""), H && (F = !1);
    }
    return f;
  }
  function e(l, B, f, x) {
    var k = [], m = l[0];
    var p = m === +m ? 2 : 1;
    1 === U(l) || 17 === m ? (m = l[p], p = !O(m) && P(m) ? p + 1 : p) : p = 11 === m ? 1 : 9 === m || 13 === m || 16 === m ? 2 : Infinity;
    m = -1;
    for (var q; p < l.length; ++p) {
      q = l[p], Q(q) || q === +q ? k[++m] = d([3, q], l, B, p, !1, x) : O(q) && (q = d(q, l, B, p, f, x), -1 === q ? --p : k[++m] = q);
    }
    return k.join("");
  }
  function z(l) {
    var B = "", f, x;
    for (f in l) {
      var k = l[f];
      (x = 0 === f.indexOf(T)) && (f = f.substr(T.length));
      "className" === f && (f = "class");
      x && (v ? k = V(v, f, k, D) : D("onInstruction is void!"));
      if (!(null == k || w[f] && !1 === k || (B += " " + f, w[f]))) {
        if ("style" === f && P(k)) {
          x = void 0;
          var m = k, p = [], q = -1;
          for (x in m) {
            k = m[x];
            "0px" === k && (k = 0);
            for (var J = ++q, t, E = [], n = x.split(""), H = n.length; H;) {
              t = n[--H], "A" <= t && "Z" >= t && (t = "-" + t.toLowerCase()), E[H] = t;
            }
            p[J] = E.join("") + ":" + W("" + k);
          }
          k = p.join(";").substr(1);
          if (!k) {
            continue;
          }
        }
        B += "=" + X(k, A, F || I);
      }
    }
    return B;
  }
  var v = b || null, u = c || null, D = "function" === typeof h ? h : function() {
  };
  b = g || {};
  var I = !0 === b.quotAlways, A = !0 === b.useSingleQuot, T = b.instructionAttrPrefix || ":", G, F = !1;
  if (O(a)) {
    return 7 === U(a) && (a = [11, a]), d(a, null, null, 0, !1, !1);
  }
}
;Z.module = {};
module.exports = Z;
Z.DOCUMENT_NODE = 9;
Z.DOCUMENT_FRAGMENT_NODE = 11;
Z.ELEMENT_NODE = 1;
Z.TEXT_NODE = 3;
Z.CDATA_SECTION = 4;
Z.PROCESSING_INSTRUCTION = 7;
Z.COMMENT_NODE = 8;
Z.COND_CMT_HIDE_LOWER = 13;
Z.COND_CMT_SHOW_LOWER_START = 14;
Z.COND_CMT_SHOW_LOWER_END = 15;
Z.NETSCAPE4_COND_CMT_HIDE_LOWER = 16;
Z.ELEMENT_START_TAG = 17;
Z.ELEMENT_END_TAG = 18;
Z.gulp = function(a, b, c, h) {
  const g = require("plugin-error");
  return require("through2").obj(function(d, e, z) {
    if (d.isNull()) {
      return z();
    }
    if (d.isStream()) {
      return this.emit("error", new g("json2html", "Streaming not supported")), z();
    }
    const v = "." + d.stem.split(".").pop();
    if (".json" === d.extname && [".html", ".htm", ".xhtml"].indexOf(v)) {
      try {
        const u = JSON.parse(d.contents.toString(e));
        if (O(u)) {
          const D = Z(u, a, b, c, h);
          d.stem = d.stem.substr(0, d.stem.length - v.length);
          d.extname = v;
          d.contents = Buffer.from(D);
        }
        this.push(d);
      } catch (u) {
        this.emit("error", new g("json2html", u));
      }
    } else {
      this.push(d);
    }
    z();
  });
};

