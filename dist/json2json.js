(function(G){var m;(function(){function n(a){return!(!a||a.pop!==[].pop)}function r(a){return''+a===a}function v(a){return r(a)||a===+a}function z(a){var d;if(d=a===''+ +a)d=G(a,10),d=d===+d;return d?+a:a}function A(a){if(v(a))a=3;else if(n(a))if(r(a[0]))a=2;else{var d=a[0];a=d===+d?a[0]:-1}else a=-1;return a}function B(a){return!n(a)&&!(!a||'object'!==typeof a)}function C(a){var d=a[0],f=2===A(a),k=2===d?2:1;return f?B(a[k])?k+1:k:1===d?1:0===d||5===d||6===d?2:Infinity}function D(a){var d=C(a),f=
'',k;if(d<a.length){for(k=d;k<a.length;){d=a[k];var w=A(d);3===w?(f=v(d)?f+d:f+d[1],a.splice(k,1)):(f&&(a.splice(k,0,z(f)),f=''),++k,2===w&&D(d))}f&&(a[k]=z(f))}}m=function(a,d,f,k){function w(c,e,g){var l=c[0],p=c[1],t=1,q=l;switch(l){case 0:x(c);break;case 1:x(c);break;case 3:break;case 4:if(!H&&e)return e.splice(g,1),-1;break;case 5:x(c);break;case 6:x(c);break;case 7:t=u;var b=c[1];l=c.slice(2);b=l.length?d(b,l):d(b);void 0!==b&&null!==b&&''!==b&&(v(b)?e?e.splice(g,1,b):(c.length=0,c.push(3,c)):
n(b)?1===b[0]?e?(b.shift(),b.unshift(g,1),e.splice.apply(e,b)):(c.length=0,c.push.apply(c,b)):n(b[0])?e?(b.unshift(g,1),e.splice.apply(e,b)):(c.length=0,c.push(1),c.push.apply(c,b)):e?e.splice(g,1,b):(c.length=0,c.push(1,b)):t('PROCESSING_INSTRUCTION Error! ['+JSON.stringify(c)+']'));if(void 0!==b){E=!0;if(null===b||''===b)return e?e.splice(g,1):(a.length=0,a.push(4,'')),-1;if(!v(b)&&n(b))return-1}else y=!1;break;case 2:q=p,t=2;default:if(r(q)){if(1+t<=c.length){e=c[t];if(B(e)){for(b in e){g=b;var h=
e[b];(l=0===b.indexOf(F))&&(b=b.substr(F.length));'className'===b&&(b='class');if(l){p=void 0;l=d;q=b;var I=u;n(h)&&r(h[0])?(p=h[0],q=h.slice(1),p=q.length?l(p,q):l(p)):r(h)?p=l(h):I('Invalid InstructionAttr value! ['+q+'='+h+']');h=p;void 0!==h?(delete e[g],n(h)?r(h[0])?(e[g]=h,y=!1):u('Invalid dynamic attribute callback value! ['+g+'='+h+']'):null!==h&&''!==h&&(e[b]=h)):y=!1}}0===Object.keys(e).length&&c.splice(t,1)}x(c)}}else u('Not html.json! ['+c+']')}}function x(c){for(var e=C(c),g;e<c.length;++e)g=
c[e],v(g)||(n(g)?-1===w(g,c,e)&&--e:u('Invalid html.json! ['+g+']'))}var u='function'===typeof f?f:function(){};f=f&&'object'===typeof f?f:k||{};var H=!!f.keepComments,F=f.instructionAttrPrefix||':',E=!1,y=!0;if(n(a))return w(a,null,0),E&&D(a),y;u('Invalid html.json document!')};module.exports=m;m.DOCUMENT_NODE=0;m.DOCUMENT_FRAGMENT_NODE=1;m.ELEMENT_NODE=2;m.TEXT_NODE=3;m.COMMENT_NODE=4;m.CONDITIONAL_COMMENT_HIDE_LOWER=5;m.CONDITIONAL_COMMENT_SHOW_LOWER=6;m.PROCESSING_INSTRUCTION=7})()})(parseInt);
